<!DOCTYPE html><html lang="fr"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galaxy i26 - Interface d'accueil</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            overflow: hidden;
            color: white;
            position: relative;
            transition: all 0.5s ease;
        }

        /* Thèmes */
        .theme-ultra-realistic {
            background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%);
        }

        .theme-cartoon {
            background: linear-gradient(135deg, #f9a8d4 0%, #c084fc 50%, #818cf8 100%);
        }

        .theme-light {
            background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
            color: #1f2937;
        }

        .theme-dark-premium {
            background: linear-gradient(135deg, #111827 0%, #1e3a8a 50%, #000000 100%);
        }

        .theme-futuristic {
            background: linear-gradient(135deg, #312e81 0%, #7c3aed 50%, #be185d 100%);
        }

        /* Effets de verre */
        .glass {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
        }

        .theme-light .glass {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(156, 163, 175, 0.3);
        }

        .theme-cartoon .glass {
            background: rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .theme-dark-premium .glass {
            background: rgba(75, 85, 99, 0.3);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .theme-futuristic .glass {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.1), rgba(139, 92, 246, 0.1));
            border: 1px solid rgba(236, 72, 153, 0.3);
        }

        /* Barre de statut */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            padding-top: 32px;
            font-size: 14px;
            z-index: 10;
            position: relative;
        }

        .status-left {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .branding {
            font-size: 18px;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .status-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .signal-bars {
            display: flex;
            gap: 2px;
        }

        .signal-bar {
            width: 4px;
            height: 12px;
            background: white;
            border-radius: 2px;
        }

        .signal-bar:nth-child(3) { opacity: 0.5; }
        .signal-bar:nth-child(4) { opacity: 0.3; }

        /* Heure principale */
        .main-time {
            text-align: center;
            margin: 32px 0;
            z-index: 10;
            position: relative;
        }

        .time-display {
            font-size: 64px;
            font-weight: 100;
            margin-bottom: 8px;
            font-variant-numeric: tabular-nums;
        }

        .date-display {
            font-size: 18px;
            opacity: 0.8;
        }

        /* Widgets */
        .widgets-container {
            padding: 0 24px;
            margin-bottom: 32px;
            z-index: 10;
            position: relative;
        }

        .widgets-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }

        .widget {
            padding: 16px;
            border-radius: 16px;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .widget:hover {
            transform: scale(1.05);
        }

        .weather-widget {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .weather-info h3 {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 4px;
        }

        .weather-temp {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .weather-desc {
            font-size: 12px;
            opacity: 0.6;
        }

        .weather-icon {
            font-size: 32px;
        }

        .battery-widget {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .battery-icon {
            font-size: 24px;
        }

        .battery-info h3 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .battery-time {
            font-size: 12px;
            opacity: 0.6;
        }

        .music-widget {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .music-cover {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .music-info h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .music-artist {
            font-size: 12px;
            opacity: 0.6;
        }

        /* Dock */
        .dock {
            position: fixed;
            bottom: 32px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
        }

        .dock-container {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 24px;
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .app-icon {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }

        .app-icon:hover {
            transform: scale(1.1);
        }

        .app-icon:active {
            transform: scale(0.95);
        }

        .app-tooltip {
            position: absolute;
            bottom: 120%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s ease;
            white-space: nowrap;
            pointer-events: none;
        }

        .app-icon:hover .app-tooltip {
            opacity: 1;
        }

        .app-messages { background: linear-gradient(135deg, #22c55e, #16a34a); }
        .app-camera { background: linear-gradient(135deg, #6b7280, #374151); }
        .app-gallery { background: linear-gradient(135deg, #3b82f6, #1d4ed8); }
        .app-music { background: linear-gradient(135deg, #ec4899, #dc2626); }
        .app-games { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .app-books { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }
        .app-settings { background: linear-gradient(135deg, #6b7280, #374151); }

        /* Contrôleur musical */
        .music-controller {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 50;
            padding: 12px;
            border-radius: 50px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .controller-content {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .control-btn {
            padding: 8px;
            border-radius: 50%;
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .volume-slider {
            width: 64px;
            height: 4px;
            border-radius: 2px;
            background: rgba(255, 255, 255, 0.3);
            appearance: none;
            cursor: pointer;
        }

        .volume-slider::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        /* Bouton personnalisation */
        .customize-btn {
            position: fixed;
            top: 80px;
            right: 24px;
            padding: 12px;
            border-radius: 50%;
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 20px;
            z-index: 30;
        }

        .customize-btn:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.1);
        }

        /* Panneau de personnalisation */
        .customization-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 40;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .customization-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .customization-panel {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 24px;
            border-radius: 24px 24px 0 0;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .customization-overlay.active .customization-panel {
            transform: translateY(0);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .panel-title {
            font-size: 20px;
            font-weight: bold;
        }

        .close-btn {
            padding: 8px;
            border-radius: 50%;
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .themes-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .theme-option {
            padding: 16px;
            border-radius: 16px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .theme-option:hover {
            border-color: rgba(255, 255, 255, 0.4);
        }

        .theme-option.active {
            border-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }

        .theme-preview {
            width: 100%;
            height: 64px;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .theme-name {
            font-size: 14px;
            font-weight: 500;
        }

        /* Previews des thèmes */
        .preview-ultra-realistic {
            background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%);
        }

        .preview-cartoon {
            background: linear-gradient(135deg, #f9a8d4 0%, #c084fc 50%, #818cf8 100%);
        }

        .preview-light {
            background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
        }

        .preview-dark-premium {
            background: linear-gradient(135deg, #111827 0%, #1e3a8a 50%, #000000 100%);
        }

        .preview-futuristic {
            background: linear-gradient(135deg, #312e81 0%, #7c3aed 50%, #be185d 100%);
        }

        /* Effets de fond */
        .bg-effects {
            position: fixed;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 1;
        }

        .bg-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
            animation: pulse 4s ease-in-out infinite;
        }

        .bg-orb:nth-child(1) {
            top: 25%;
            left: 25%;
            width: 256px;
            height: 256px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2));
        }

        .bg-orb:nth-child(2) {
            bottom: 25%;
            right: 25%;
            width: 320px;
            height: 320px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(34, 197, 94, 0.2));
            animation-delay: 1s;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.1); }
        }

        /* Responsive */
        @media (max-width: 480px) {
            .time-display {
                font-size: 48px;
            }
            
            .widgets-container {
                padding: 0 16px;
            }
            
            .dock-container {
                padding: 12px 16px;
                gap: 8px;
            }
            
            .app-icon {
                width: 48px;
                height: 48px;
                font-size: 20px;
            }
        }

        /* Messages de status */
        .status-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .status-message.show {
            opacity: 1;
        }

        /* Panneau de paramètres */
        .settings-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 45;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .settings-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .settings-panel {
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            max-width: 400px;
            height: 100%;
            padding: 24px;
            overflow-y: auto;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .settings-overlay.active .settings-panel {
            transform: translateX(0);
        }

        .settings-section {
            margin-bottom: 32px;
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 16px;
            opacity: 0.9;
        }

        .system-info-grid {
            display: grid;
            gap: 12px;
        }

        .info-item {
            padding: 16px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .info-item:hover {
            transform: scale(1.02);
        }

        .info-icon {
            font-size: 20px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }

        .info-content {
            flex: 1;
        }

        .info-label {
            font-size: 12px;
            opacity: 0.7;
            margin-bottom: 2px;
        }

        .info-value {
            font-size: 14px;
            font-weight: 600;
        }

        .info-status {
            font-size: 12px;
            opacity: 0.6;
            margin-top: 2px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-left: auto;
        }

        .status-connected {
            background: #22c55e;
            box-shadow: 0 0 8px rgba(34, 197, 94, 0.5);
        }

        .status-disconnected {
            background: #ef4444;
            box-shadow: 0 0 8px rgba(239, 68, 68, 0.5);
        }

        .status-active {
            background: #3b82f6;
            box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
        }

        /* Boutons de simulation */
        .simulate-btn {
            padding: 4px 8px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 8px;
        }

        .simulate-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .theme-light .simulate-btn {
            color: #1f2937;
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .theme-light .simulate-btn:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        /* Widget Messages */
        .messages-widget {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .messages-header {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .messages-icon {
            font-size: 24px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }

        .messages-title h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .messages-count {
            font-size: 12px;
            opacity: 0.6;
        }

        .recent-messages {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .recent-message {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 0;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.1);
        }

        .message-preview {
            flex: 1;
            min-width: 0;
        }

        .message-contact {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .message-text {
            font-size: 11px;
            opacity: 0.7;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .message-time {
            font-size: 10px;
            opacity: 0.5;
            margin-left: auto;
        }

        /* Interface de Messages complète */
        .messages-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .messages-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .messages-app {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .messages-overlay.active .messages-app {
            transform: scale(1);
        }

        .conversations-list {
            width: 100%;
            max-width: 350px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
        }

        .conversation-view {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
        }

        .messages-app-header {
            padding: 20px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .messages-app-title {
            font-size: 24px;
            font-weight: bold;
        }

        .conversation-header {
            padding: 20px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .conversation-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
        }

        .conversation-info h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .conversation-status {
            font-size: 12px;
            opacity: 0.6;
        }

        .conversations-scroll {
            flex: 1;
            overflow-y: auto;
            padding: 8px 0;
        }

        .conversation-item {
            padding: 16px 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .conversation-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .conversation-item.active {
            background: rgba(255, 255, 255, 0.15);
            border-left-color: #5D5CDE;
        }

        .conversation-item .message-avatar {
            width: 48px;
            height: 48px;
            font-size: 20px;
        }

        .conversation-item .message-preview {
            flex: 1;
        }

        .conversation-item .message-contact {
            font-size: 15px;
            margin-bottom: 4px;
        }

        .conversation-item .message-text {
            font-size: 13px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .conversation-item .message-time {
            font-size: 12px;
            align-self: flex-start;
            margin-top: 2px;
        }

        .messages-content {
            flex: 1;
            overflow-y: auto;
            padding: 16px 24px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
            word-wrap: break-word;
        }

        .message-sent {
            align-self: flex-end;
            background: linear-gradient(135deg, #5D5CDE, #7c3aed);
            color: white;
            border-bottom-right-radius: 6px;
        }

        .message-received {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.15);
            border-bottom-left-radius: 6px;
        }

        .message-bubble .message-text {
            font-size: 14px;
            line-height: 1.4;
            white-space: pre-wrap;
            opacity: 1;
        }

        .message-bubble .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 4px;
            text-align: right;
        }

        .message-received .message-time {
            text-align: left;
        }

        .message-input-container {
            padding: 16px 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .message-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            padding: 12px 20px;
            color: white;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .message-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .message-input:focus {
            border-color: #5D5CDE;
            box-shadow: 0 0 0 2px rgba(93, 92, 222, 0.2);
        }

        .theme-light .message-input {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #1f2937;
        }

        .theme-light .message-input::placeholder {
            color: rgba(0, 0, 0, 0.5);
        }

        .send-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, #5D5CDE, #7c3aed);
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        .send-btn:active {
            transform: scale(0.95);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Responsive Messages */
        @media (max-width: 768px) {
            .messages-app {
                flex-direction: column;
            }
            
            .conversations-list {
                max-width: none;
                height: auto;
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .conversations-scroll {
                max-height: 200px;
            }
            
            .conversation-view {
                min-height: 0;
            }
            
            .message-bubble {
                max-width: 85%;
            }
        }

        /* Interface de Jeux */
        .games-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 55;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .games-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .games-app {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 90%;
            max-width: 800px;
            height: 80%;
            transition: transform 0.3s ease;
        }

        .games-overlay.active .games-app {
            transform: translate(-50%, -50%) scale(1);
        }

        .games-header {
            padding: 20px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .games-title {
            font-size: 24px;
            font-weight: bold;
        }

        .games-content {
            padding: 24px;
            height: calc(100% - 80px);
            overflow-y: auto;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .game-card {
            padding: 20px;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .game-card:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 0.15);
        }

        .game-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .game-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .game-desc {
            font-size: 14px;
            opacity: 0.7;
        }

        /* Interface de jeu individuel */
        .game-view {
            display: none;
            height: 100%;
            flex-direction: column;
        }

        .game-view.active {
            display: flex;
        }

        .game-header {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .game-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .back-btn {
            padding: 8px 16px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .game-score {
            font-size: 18px;
            font-weight: 600;
        }

        .game-board {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .game-controls {
            padding: 16px 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .game-btn {
            padding: 12px 24px;
            border-radius: 12px;
            background: linear-gradient(135deg, #5D5CDE, #7c3aed);
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .game-btn:hover {
            transform: scale(1.05);
        }

        .game-btn:active {
            transform: scale(0.95);
        }

        .game-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* 2048 */
        .game-2048 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            width: 300px;
            height: 300px;
            padding: 12px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
        }

        .tile-2048 {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 24px;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .tile-2048.tile-2 { background: #eee4da; color: #776e65; }
        .tile-2048.tile-4 { background: #ede0c8; color: #776e65; }
        .tile-2048.tile-8 { background: #f2b179; color: #f9f6f2; }
        .tile-2048.tile-16 { background: #f59563; color: #f9f6f2; }
        .tile-2048.tile-32 { background: #f67c5f; color: #f9f6f2; }
        .tile-2048.tile-64 { background: #f65e3b; color: #f9f6f2; }
        .tile-2048.tile-128 { background: #edcf72; color: #f9f6f2; font-size: 20px; }
        .tile-2048.tile-256 { background: #edcc61; color: #f9f6f2; font-size: 20px; }
        .tile-2048.tile-512 { background: #edc850; color: #f9f6f2; font-size: 20px; }
        .tile-2048.tile-1024 { background: #edc53f; color: #f9f6f2; font-size: 18px; }
        .tile-2048.tile-2048 { background: #edc22e; color: #f9f6f2; font-size: 18px; }

        /* Tic Tac Toe */
        .game-tictactoe {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 4px;
            width: 240px;
            height: 240px;
            padding: 8px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
        }

        .cell-ttt {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 36px;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cell-ttt:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .cell-ttt.disabled {
            cursor: not-allowed;
        }

        /* Puissance 4 */
        .game-connect4 {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            width: 350px;
            height: 300px;
            padding: 8px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
        }

        .cell-c4 {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 28px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cell-c4:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .cell-c4.player1 {
            background: #ef4444;
            color: white;
        }

        .cell-c4.player2 {
            background: #fbbf24;
            color: white;
        }

        .game-status {
            text-align: center;
            margin-bottom: 16px;
            font-size: 18px;
            font-weight: 600;
        }

        /* Responsive Games */
        @media (max-width: 768px) {
            .games-app {
                width: 95%;
                height: 90%;
            }
            
            .games-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .game-2048 {
                width: 250px;
                height: 250px;
            }
            
            .tile-2048 {
                font-size: 20px;
            }
            
            .game-tictactoe {
                width: 200px;
                height: 200px;
            }
            
            .cell-ttt {
                font-size: 28px;
            }
            
            .game-connect4 {
                width: 280px;
                height: 240px;
            }
            
            .cell-c4 {
                font-size: 20px;
            }
        }

        /* Sélecteur de thèmes des jeux */
        .games-header-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .games-theme-btn {
            padding: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .games-theme-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .game-themes-selector {
            margin-bottom: 24px;
            padding: 16px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: none;
        }

        .game-themes-selector.show {
            display: block;
        }

        .themes-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            text-align: center;
        }

        .game-themes-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
        }

        .game-theme-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-size: 12px;
        }

        .game-theme-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .game-theme-option.active {
            border-color: #5D5CDE;
            background: rgba(93, 92, 222, 0.2);
        }

        .theme-preview-mini {
            width: 40px;
            height: 24px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Aperçus des thèmes des jeux */
        .classic-preview {
            background: linear-gradient(45deg, #eee4da, #f2b179);
        }

        .dark-preview {
            background: linear-gradient(45deg, #1a1a1a, #333333);
        }

        .neon-preview {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
        }

        .pastel-preview {
            background: linear-gradient(45deg, #ffb3ba, #bae1ff);
        }

        .retro-preview {
            background: linear-gradient(45deg, #f4a261, #e76f51);
        }

        /* Thèmes des jeux */
        .games-app.game-theme-classic {
            /* Thème classique par défaut */
        }

        .games-app.game-theme-dark .tile-2048 {
            background: #2a2a2a !important;
            color: #ffffff !important;
            border: 1px solid #444444 !important;
        }

        .games-app.game-theme-dark .tile-2048.tile-2 { background: #3a3a3a !important; color: #ffffff !important; }
        .games-app.game-theme-dark .tile-2048.tile-4 { background: #4a4a4a !important; color: #ffffff !important; }
        .games-app.game-theme-dark .tile-2048.tile-8 { background: #5a5a5a !important; color: #ffffff !important; }
        .games-app.game-theme-dark .tile-2048.tile-16 { background: #6a6a6a !important; color: #ffffff !important; }
        .games-app.game-theme-dark .tile-2048.tile-32 { background: #7a7a7a !important; color: #ffffff !important; }
        .games-app.game-theme-dark .tile-2048.tile-64 { background: #8a8a8a !important; color: #ffffff !important; }
        .games-app.game-theme-dark .tile-2048.tile-128 { background: #9a9a9a !important; color: #000000 !important; }
        .games-app.game-theme-dark .tile-2048.tile-256 { background: #aaaaaa !important; color: #000000 !important; }
        .games-app.game-theme-dark .tile-2048.tile-512 { background: #bbbbbb !important; color: #000000 !important; }
        .games-app.game-theme-dark .tile-2048.tile-1024 { background: #cccccc !important; color: #000000 !important; }
        .games-app.game-theme-dark .tile-2048.tile-2048 { background: #dddddd !important; color: #000000 !important; }

        .games-app.game-theme-dark .cell-ttt {
            background: #2a2a2a !important;
            border: 1px solid #444444 !important;
            color: #ffffff !important;
        }

        .games-app.game-theme-dark .cell-c4 {
            background: #2a2a2a !important;
            border: 2px solid #444444 !important;
        }

        .games-app.game-theme-dark .cell-c4.player1 {
            background: #cc4444 !important;
        }

        .games-app.game-theme-dark .cell-c4.player2 {
            background: #ccaa44 !important;
        }

        /* Thème Néon */
        .games-app.game-theme-neon .tile-2048 {
            background: #001122 !important;
            color: #00ffff !important;
            border: 1px solid #00ffff !important;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3) !important;
        }

        .games-app.game-theme-neon .tile-2048.tile-2 { background: #002244 !important; color: #00ffff !important; box-shadow: 0 0 10px rgba(0, 255, 255, 0.5) !important; }
        .games-app.game-theme-neon .tile-2048.tile-4 { background: #004488 !important; color: #00ffff !important; box-shadow: 0 0 15px rgba(0, 255, 255, 0.6) !important; }
        .games-app.game-theme-neon .tile-2048.tile-8 { background: #0066cc !important; color: #ffffff !important; box-shadow: 0 0 15px rgba(255, 0, 255, 0.6) !important; }
        .games-app.game-theme-neon .tile-2048.tile-16 { background: #0088ff !important; color: #ffffff !important; box-shadow: 0 0 20px rgba(255, 0, 255, 0.7) !important; }
        .games-app.game-theme-neon .tile-2048.tile-32 { background: #22aaff !important; color: #000000 !important; box-shadow: 0 0 20px rgba(255, 255, 0, 0.7) !important; }
        .games-app.game-theme-neon .tile-2048.tile-64 { background: #44ccff !important; color: #000000 !important; box-shadow: 0 0 25px rgba(255, 255, 0, 0.8) !important; }
        .games-app.game-theme-neon .tile-2048.tile-128 { background: #66eeff !important; color: #000000 !important; box-shadow: 0 0 25px rgba(255, 0, 128, 0.8) !important; }
        .games-app.game-theme-neon .tile-2048.tile-256 { background: #88ffff !important; color: #000000 !important; box-shadow: 0 0 30px rgba(255, 0, 128, 0.9) !important; }
        .games-app.game-theme-neon .tile-2048.tile-512 { background: #aaffff !important; color: #000000 !important; box-shadow: 0 0 30px rgba(128, 255, 0, 0.9) !important; }
        .games-app.game-theme-neon .tile-2048.tile-1024 { background: #ccffff !important; color: #000000 !important; box-shadow: 0 0 35px rgba(128, 255, 0, 1) !important; }
        .games-app.game-theme-neon .tile-2048.tile-2048 { background: #ffffff !important; color: #000000 !important; box-shadow: 0 0 40px rgba(255, 255, 255, 1) !important; }

        .games-app.game-theme-neon .cell-ttt {
            background: #001122 !important;
            border: 1px solid #00ffff !important;
            color: #00ffff !important;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3) !important;
        }

        .games-app.game-theme-neon .cell-c4 {
            background: #001122 !important;
            border: 2px solid #00ffff !important;
            box-shadow: 0 0 5px rgba(0, 255, 255, 0.3) !important;
        }

        .games-app.game-theme-neon .cell-c4.player1 {
            background: #ff0080 !important;
            box-shadow: 0 0 15px rgba(255, 0, 128, 0.8) !important;
        }

        .games-app.game-theme-neon .cell-c4.player2 {
            background: #00ff80 !important;
            box-shadow: 0 0 15px rgba(0, 255, 128, 0.8) !important;
        }

        /* Thème Pastel */
        .games-app.game-theme-pastel .tile-2048 {
            background: #fff5f5 !important;
            color: #4a5568 !important;
            border: 1px solid #fbb6ce !important;
        }

        .games-app.game-theme-pastel .tile-2048.tile-2 { background: #fed7d7 !important; color: #4a5568 !important; }
        .games-app.game-theme-pastel .tile-2048.tile-4 { background: #fbb6ce !important; color: #4a5568 !important; }
        .games-app.game-theme-pastel .tile-2048.tile-8 { background: #f687b3 !important; color: #ffffff !important; }
        .games-app.game-theme-pastel .tile-2048.tile-16 { background: #ed64a6 !important; color: #ffffff !important; }
        .games-app.game-theme-pastel .tile-2048.tile-32 { background: #d53f8c !important; color: #ffffff !important; }
        .games-app.game-theme-pastel .tile-2048.tile-64 { background: #b83280 !important; color: #ffffff !important; }
        .games-app.game-theme-pastel .tile-2048.tile-128 { background: #97266d !important; color: #ffffff !important; }
        .games-app.game-theme-pastel .tile-2048.tile-256 { background: #702459 !important; color: #ffffff !important; }
        .games-app.game-theme-pastel .tile-2048.tile-512 { background: #553c9a !important; color: #ffffff !important; }
        .games-app.game-theme-pastel .tile-2048.tile-1024 { background: #805ad5 !important; color: #ffffff !important; }
        .games-app.game-theme-pastel .tile-2048.tile-2048 { background: #9f7aea !important; color: #ffffff !important; }

        .games-app.game-theme-pastel .cell-ttt {
            background: #fff5f5 !important;
            border: 1px solid #fbb6ce !important;
            color: #4a5568 !important;
        }

        .games-app.game-theme-pastel .cell-c4 {
            background: #fff5f5 !important;
            border: 2px solid #fbb6ce !important;
        }

        .games-app.game-theme-pastel .cell-c4.player1 {
            background: #f687b3 !important;
        }

        .games-app.game-theme-pastel .cell-c4.player2 {
            background: #9f7aea !important;
        }

        /* Thème Rétro */
        .games-app.game-theme-retro .tile-2048 {
            background: #8b4513 !important;
            color: #ffd700 !important;
            border: 2px solid #ffd700 !important;
            font-family: 'Courier New', monospace !important;
        }

        .games-app.game-theme-retro .tile-2048.tile-2 { background: #a0522d !important; color: #ffd700 !important; }
        .games-app.game-theme-retro .tile-2048.tile-4 { background: #cd853f !important; color: #000000 !important; }
        .games-app.game-theme-retro .tile-2048.tile-8 { background: #daa520 !important; color: #000000 !important; }
        .games-app.game-theme-retro .tile-2048.tile-16 { background: #ffd700 !important; color: #000000 !important; }
        .games-app.game-theme-retro .tile-2048.tile-32 { background: #ffb347 !important; color: #000000 !important; }
        .games-app.game-theme-retro .tile-2048.tile-64 { background: #ff8c00 !important; color: #ffffff !important; }
        .games-app.game-theme-retro .tile-2048.tile-128 { background: #ff7f50 !important; color: #ffffff !important; }
        .games-app.game-theme-retro .tile-2048.tile-256 { background: #ff6347 !important; color: #ffffff !important; }
        .games-app.game-theme-retro .tile-2048.tile-512 { background: #ff4500 !important; color: #ffffff !important; }
        .games-app.game-theme-retro .tile-2048.tile-1024 { background: #dc143c !important; color: #ffffff !important; }
        .games-app.game-theme-retro .tile-2048.tile-2048 { background: #b22222 !important; color: #ffd700 !important; }

        .games-app.game-theme-retro .cell-ttt {
            background: #8b4513 !important;
            border: 2px solid #ffd700 !important;
            color: #ffd700 !important;
            font-family: 'Courier New', monospace !important;
            font-weight: bold !important;
        }

        .games-app.game-theme-retro .cell-c4 {
            background: #8b4513 !important;
            border: 3px solid #ffd700 !important;
        }

        .games-app.game-theme-retro .cell-c4.player1 {
            background: #dc143c !important;
            border-color: #ffd700 !important;
        }

        .games-app.game-theme-retro .cell-c4.player2 {
            background: #ffd700 !important;
            border-color: #8b4513 !important;
        }

        /* Responsive themes */
        @media (max-width: 768px) {
            .game-themes-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .games-header-controls {
                gap: 8px;
            }
        }

        /* === INTERFACE LIVRES === */

        /* Overlay principal des livres */
        .books-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 60;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .books-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .books-app {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .books-overlay.active .books-app {
            transform: scale(1);
        }

        /* Header de l'app Livres */
        .books-header {
            padding: 20px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .books-title {
            font-size: 24px;
            font-weight: bold;
        }

        .books-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .reading-mode-btn {
            padding: 8px 16px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .reading-mode-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .reading-mode-btn.active {
            background: #5D5CDE;
            border-color: #5D5CDE;
        }

        /* Bibliothèque */
        .library-view {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
        }

        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .book-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .book-card:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 0.15);
        }

        .book-cover {
            height: 240px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .book-cover::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(10px);
        }

        .book-cover-content {
            position: relative;
            z-index: 1;
        }

        .book-icon {
            font-size: 48px;
            margin-bottom: 12px;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        .book-cover-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .book-cover-subtitle {
            font-size: 12px;
            opacity: 0.8;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .book-info {
            padding: 16px;
        }

        .book-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .book-author {
            font-size: 12px;
            opacity: 0.7;
            margin-bottom: 8px;
        }

        .book-description {
            font-size: 11px;
            opacity: 0.6;
            line-height: 1.3;
        }

        /* Couvertures spécifiques */
        .book-cover.guerre-marques {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 50%, #1f2937 100%);
        }

        .book-cover.amour-marques {
            background: linear-gradient(135deg, #ec4899 0%, #be185d 50%, #7c3aed 100%);
        }

        .book-cover.samsung-apple {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 50%, #1f2937 100%);
        }

        .book-cover.marques-mechantes {
            background: linear-gradient(135deg, #374151 0%, #1f2937 50%, #111827 100%);
        }

        .book-cover.tech-chronicles {
            background: linear-gradient(135deg, #10b981 0%, #059669 50%, #065f46 100%);
        }

        /* Lecteur de livre */
        .book-reader {
            display: none;
            flex-direction: column;
            height: 100%;
        }

        .book-reader.active {
            display: flex;
        }

        .reader-header {
            padding: 16px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .reader-navigation {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .reader-back-btn {
            padding: 8px 16px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .reader-back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .reader-book-title {
            font-size: 18px;
            font-weight: 600;
        }

        .reader-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chapter-selector {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            min-width: 120px;
        }

        .chapter-selector option {
            background: #1f2937;
            color: white;
        }

        /* Contenu du lecteur */
        .reader-content {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.02);
        }

        .reader-content.dark-mode {
            background: rgba(0, 0, 0, 0.3);
            color: #e5e7eb;
        }

        .reader-content.light-mode {
            background: rgba(255, 255, 255, 0.9);
            color: #1f2937;
        }

        .chapter-content {
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
            font-size: 16px;
        }

        .chapter-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 24px;
            text-align: center;
        }

        .chapter-text {
            margin-bottom: 20px;
        }

        .chapter-text p {
            margin-bottom: 16px;
        }

        .dialogue {
            font-style: italic;
            margin: 16px 0;
            padding: 16px;
            border-left: 3px solid rgba(93, 92, 222, 0.5);
            background: rgba(93, 92, 222, 0.1);
            border-radius: 0 8px 8px 0;
        }

        .dialogue.samsung {
            border-left-color: rgba(59, 130, 246, 0.5);
            background: rgba(59, 130, 246, 0.1);
        }

        .dialogue.apple {
            border-left-color: rgba(156, 163, 175, 0.5);
            background: rgba(156, 163, 175, 0.1);
        }

        .dialogue.evil-brand {
            border-left-color: rgba(239, 68, 68, 0.5);
            background: rgba(239, 68, 68, 0.1);
        }

        /* Navigation des pages */
        .reader-footer {
            padding: 16px 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .page-navigation {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .nav-btn {
            padding: 8px 16px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn:disabled:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .page-info {
            font-size: 14px;
            opacity: 0.7;
        }

        .reading-progress {
            flex: 1;
            max-width: 200px;
            margin: 0 16px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #5D5CDE, #7c3aed);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        /* Responsive Books */
        @media (max-width: 768px) {
            .books-grid {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
                gap: 16px;
            }
            
            .book-cover {
                height: 200px;
                padding: 16px;
            }
            
            .book-icon {
                font-size: 36px;
            }
            
            .book-cover-title {
                font-size: 16px;
            }
            
            .reader-content {
                padding: 20px 16px;
            }
            
            .chapter-content {
                font-size: 15px;
            }
            
            .chapter-title {
                font-size: 24px;
            }
            
            .reader-controls {
                gap: 8px;
            }
            
            .chapter-selector {
                min-width: 100px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body class="theme-ultra-realistic" id="appBody">
    <!-- Audio pour la musique de fond -->
    <audio id="backgroundMusic" loop="" preload="metadata" crossorigin="anonymous">
        <!-- Lien principal optimisé -->
        <source src="https://github.com/AdelWolf5/MacOS-16-x-HyperOS-3/raw/refs/heads/main/Silhouettes%20(Original%20Mix).mp3" type="audio/mpeg">
        <!-- Fallbacks multiples -->
        <source src="https://raw.githubusercontent.com/AdelWolf5/MacOS-16-x-HyperOS-3/refs/heads/main/Silhouettes%20(Original%20Mix).mp3" type="audio/mpeg">
        <source src="https://github.com/AdelWolf5/MacOS-16-x-HyperOS-3/blob/main/Silhouettes%20(Original%20Mix).mp3?raw=true" type="audio/mpeg">
    </audio>

    <!-- Messages de status -->
    <div class="status-message" id="statusMessage"></div>

    <!-- Effets de fond -->
    <div class="bg-effects">
        <div class="bg-orb"></div>
        <div class="bg-orb"></div>
    </div>

    <!-- Barre de statut -->
    <div class="status-bar">
        <div class="status-left">
            <div id="currentTime">11:57</div>
        </div>
        
        <div class="branding">
            Galaxy i26
        </div>
        
        <div class="status-right">
            <span>📶</span>
            <div class="signal-bars">
                <div class="signal-bar"></div>
                <div class="signal-bar"></div>
                <div class="signal-bar"></div>
                <div class="signal-bar"></div>
            </div>
            <span>🔋</span>
        </div>
    </div>

    <!-- Heure et date principale -->
    <div class="main-time">
        <div class="time-display" id="mainTime">11:57</div>
        <div class="date-display" id="mainDate">Dimanche 1 juin</div>
    </div>

    <!-- Zone des widgets -->
    <div class="widgets-container">
        <div class="widgets-grid">
            <!-- Widget Météo -->
            <div class="widget glass weather-widget">
                <div class="weather-info">
                    <h3>Paris</h3>
                    <div class="weather-temp">22°C</div>
                    <div class="weather-desc">Ensoleillé</div>
                </div>
                <div class="weather-icon">☀️</div>
            </div>

            <!-- Widget Batterie -->
            <div class="widget glass battery-widget">
                <div class="battery-icon">🔋</div>
                <div class="battery-info">
                    <h3>85%</h3>
                    <div class="battery-time">4h 23m restantes</div>
                </div>
            </div>
        </div>

        <!-- Widget Musique -->
        <div class="widget glass music-widget" onclick="toggleMusic()">
            <div class="music-cover" id="musicCover">🎵</div>
            <div class="music-info">
                <h3 id="musicTitle">Silhouettes</h3>
                <div class="music-artist" id="musicArtist">Original Mix</div>
            </div>
            <div id="audioStatus" style="font-size: 10px; opacity: 0.6; margin-top: 4px;">
                🎧 Mode simulation optimal
            </div>
            <div style="font-size: 9px; opacity: 0.5; margin-top: 2px;">
                ✨ Expérience immersive garantie
            </div>
        </div>

        <!-- Widget Messages -->
        <div class="widget glass messages-widget" onclick="toggleMessages()">
            <div class="messages-header">
                <div class="messages-icon">💬</div>
                <div class="messages-title">
                    <h3>Messages</h3>
                    <div class="messages-count" id="messagesCount">4 conversations</div>
                </div>
            </div>
            <div class="recent-messages">
                <div class="recent-message" id="recentMessage">
                    <div class="message-avatar">👩</div>
                    <div class="message-preview">
                        <div class="message-contact">Nouhaila</div>
                        <div class="message-text">Salut ! Tu fais quoi ce soir ? 😊</div>
                    </div>
                    <div class="message-time">14:23</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dock d'applications -->
    <div class="dock">
        <div class="dock-container glass">
            <div class="app-icon app-messages" onclick="toggleMessages()">
                <span>💬</span>
                <div class="app-tooltip">Messages</div>
            </div>
            <div class="app-icon app-camera" onclick="showMessage('Appareil photo')">
                <span>📷</span>
                <div class="app-tooltip">Appareil photo</div>
            </div>
            <div class="app-icon app-gallery" onclick="showMessage('Galerie')">
                <span>🖼️</span>
                <div class="app-tooltip">Galerie</div>
            </div>
            <div class="app-icon app-music" onclick="toggleMusic()">
                <span>🎵</span>
                <div class="app-tooltip">Musique</div>
            </div>
            <div class="app-icon app-games" onclick="toggleGames()">
                <span>🎮</span>
                <div class="app-tooltip">Jeux</div>
            </div>
            <div class="app-icon app-books" onclick="toggleBooks()">
                <span>📚</span>
                <div class="app-tooltip">Livres</div>
            </div>
            <div class="app-icon app-settings" onclick="toggleSettings()">
                <span>⚙️</span>
                <div class="app-tooltip">Paramètres</div>
            </div>
        </div>
    </div>

    <!-- Bouton de personnalisation -->
    <button class="customize-btn glass" onclick="toggleCustomization()">
        ⚙️
    </button>

    <!-- Contrôleur musical -->
    <div class="music-controller glass">
        <div class="controller-content">
            <button class="control-btn" onclick="toggleMusic()" id="playBtn">
                ▶️
            </button>
            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50" oninput="changeVolume(this.value)">
            <button class="control-btn" onclick="toggleMute()" id="muteBtn">
                🔊
            </button>
        </div>
    </div>

    <!-- Panneau de paramètres -->
    <div class="settings-overlay" id="settingsOverlay">
        <div class="settings-panel glass">
            <div class="panel-header">
                <h3 class="panel-title">Paramètres</h3>
                <button class="close-btn" onclick="toggleSettings()">
                    ✕
                </button>
            </div>
            
            <div class="settings-section">
                <h3 class="section-title">💻 Informations système</h3>
                <div class="system-info-grid">
                    <!-- CPU -->
                    <div class="info-item glass" onclick="simulateCPU()">
                        <div class="info-icon">🖥️</div>
                        <div class="info-content">
                            <div class="info-label">Processeur</div>
                            <div class="info-value" id="cpuModel">Apple M5 Ultra Fusion</div>
                            <div class="info-status" id="cpuStatus">8 cœurs Performance + 4 cœurs Efficacité</div>
                        </div>
                        <button class="simulate-btn" onclick="event.stopPropagation(); simulateCPU()">Simuler</button>
                    </div>

                    <!-- GPU -->
                    <div class="info-item glass" onclick="simulateGPU()">
                        <div class="info-icon">🎮</div>
                        <div class="info-content">
                            <div class="info-label">Processeur graphique</div>
                            <div class="info-value" id="gpuModel">RTX 6090 Super</div>
                            <div class="info-status" id="gpuStatus">24 GB VRAM - DLSS 4.0</div>
                        </div>
                        <button class="simulate-btn" onclick="event.stopPropagation(); simulateGPU()">Simuler</button>
                    </div>

                    <!-- Wi-Fi -->
                    <div class="info-item glass" onclick="simulateWiFi()">
                        <div class="info-icon">📶</div>
                        <div class="info-content">
                            <div class="info-label">Wi-Fi</div>
                            <div class="info-value" id="wifiNetwork">Galaxy_Network_Pro</div>
                            <div class="info-status" id="wifiStatus">Connecté - Signal excellent</div>
                        </div>
                        <div class="status-indicator status-connected" id="wifiIndicator"></div>
                        <button class="simulate-btn" onclick="event.stopPropagation(); simulateWiFi()">Basculer</button>
                    </div>

                    <!-- Bluetooth -->
                    <div class="info-item glass" onclick="simulateBluetooth()">
                        <div class="info-icon">🔵</div>
                        <div class="info-content">
                            <div class="info-label">Bluetooth</div>
                            <div class="info-value" id="bluetoothStatus">Activé</div>
                            <div class="info-status" id="bluetoothDevices">2 appareils connectés</div>
                        </div>
                        <div class="status-indicator status-active" id="bluetoothIndicator"></div>
                        <button class="simulate-btn" onclick="event.stopPropagation(); simulateBluetooth()">Basculer</button>
                    </div>

                    <!-- RAM -->
                    <div class="info-item glass" onclick="simulateRAM()">
                        <div class="info-icon">💾</div>
                        <div class="info-content">
                            <div class="info-label">Mémoire RAM</div>
                            <div class="info-value" id="ramTotal">32 GB</div>
                            <div class="info-status" id="ramUsage">18.4 GB utilisés (57%)</div>
                        </div>
                        <button class="simulate-btn" onclick="event.stopPropagation(); simulateRAM()">Simuler</button>
                    </div>

                    <!-- Stockage -->
                    <div class="info-item glass" onclick="simulateStorage()">
                        <div class="info-icon">💽</div>
                        <div class="info-content">
                            <div class="info-label">Stockage</div>
                            <div class="info-value" id="storageTotal">2 TB SSD</div>
                            <div class="info-status" id="storageUsage">847 GB disponibles (42%)</div>
                        </div>
                        <button class="simulate-btn" onclick="event.stopPropagation(); simulateStorage()">Simuler</button>
                    </div>

                    <!-- Version OS -->
                    <div class="info-item glass">
                        <div class="info-icon">🚀</div>
                        <div class="info-content">
                            <div class="info-label">Système d'exploitation</div>
                            <div class="info-value" id="osVersion">Galaxy OS 26.1</div>
                            <div class="info-status" id="osStatus">Dernière version installée</div>
                        </div>
                    </div>

                    <!-- Batterie détaillée -->
                    <div class="info-item glass" onclick="simulateBattery()">
                        <div class="info-icon">🔋</div>
                        <div class="info-content">
                            <div class="info-label">Batterie</div>
                            <div class="info-value" id="batteryLevel">85%</div>
                            <div class="info-status" id="batteryHealth">Santé: 98% - 4h 23m restantes</div>
                        </div>
                        <button class="simulate-btn" onclick="event.stopPropagation(); simulateBattery()">Simuler</button>
                    </div>

                    <!-- Audio System -->
                    <div class="info-item glass" onclick="testAudio()">
                        <div class="info-icon">🎵</div>
                        <div class="info-content">
                            <div class="info-label">Système Audio</div>
                            <div class="info-value" id="audioSystemStatus">Mode simulation</div>
                            <div class="info-status" id="audioSystemDetails">Optimal pour Claude.ai</div>
                        </div>
                        <button class="simulate-btn" onclick="event.stopPropagation(); testAudio()">Tester</button>
                    </div>

                    <!-- Test audio réel forcé -->
                    <div class="info-item glass" onclick="forceRealAudioTest()">
                        <div class="info-icon">🎶</div>
                        <div class="info-content">
                            <div class="info-label">Test Audio Réel</div>
                            <div class="info-value">Force test</div>
                            <div class="info-status">Tenter audio GitHub (peut échouer)</div>
                        </div>
                        <button class="simulate-btn" onclick="event.stopPropagation(); forceRealAudioTest()">Forcer</button>
                    </div>

                    <!-- Mode simulation optimal -->
                    <div class="info-item glass" onclick="forceSimulationMode()">
                        <div class="info-icon">🎧</div>
                        <div class="info-content">
                            <div class="info-label">Mode Simulation</div>
                            <div class="info-value">Expérience optimale</div>
                            <div class="info-status">Recommandé pour Claude.ai</div>
                        </div>
                        <button class="simulate-btn" onclick="event.stopPropagation(); forceSimulationMode()">Activer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Interface Messages complète -->
    <div class="messages-overlay" id="messagesOverlay">
        <div class="messages-app glass">
            <!-- Liste des conversations -->
            <div class="conversations-list">
                <div class="messages-app-header">
                    <h2 class="messages-app-title">Messages</h2>
                    <button class="close-btn" onclick="toggleMessages()">✕</button>
                </div>
                <div class="conversations-scroll">
                    <div class="conversation-item active" onclick="selectConversation('nouhaila')">
                        <div class="message-avatar">👩</div>
                        <div class="message-preview">
                            <div class="message-contact">Nouhaila</div>
                            <div class="message-text">Salut ! Tu fais quoi ce soir ? 😊</div>
                        </div>
                        <div class="message-time">14:23</div>
                    </div>
                    <div class="conversation-item" onclick="selectConversation('rodrigue')">
                        <div class="message-avatar">👨</div>
                        <div class="message-preview">
                            <div class="message-contact">Rodrigue</div>
                            <div class="message-text">On se voit demain pour le projet ?</div>
                        </div>
                        <div class="message-time">13:45</div>
                    </div>
                    <div class="conversation-item" onclick="selectConversation('rebecca')">
                        <div class="message-avatar">👩‍🦰</div>
                        <div class="message-preview">
                            <div class="message-contact">Rebecca</div>
                            <div class="message-text">J'ai adoré le film d'hier ! 🎬✨</div>
                        </div>
                        <div class="message-time">12:30</div>
                    </div>
                    <div class="conversation-item" onclick="selectConversation('alex')">
                        <div class="message-avatar">🧑‍💻</div>
                        <div class="message-preview">
                            <div class="message-contact">Alex</div>
                            <div class="message-text">Peux-tu m'envoyer le code ?</div>
                        </div>
                        <div class="message-time">11:15</div>
                    </div>
                </div>
            </div>

            <!-- Vue de conversation -->
            <div class="conversation-view">
                <div class="conversation-header">
                    <div class="conversation-avatar" id="conversationAvatar">👩</div>
                    <div class="conversation-info">
                        <h3 id="conversationName">Nouhaila</h3>
                        <div class="conversation-status" id="conversationStatus">En ligne</div>
                    </div>
                </div>
                
                <div class="messages-content" id="messagesContent">
                    <!-- Messages dynamiques -->
                </div>
                
                <div class="message-input-container">
                    <input type="text" class="message-input" id="messageInput" placeholder="Tapez votre message..." onkeypress="handleKeyPress(event)">
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                        ➤
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Interface Jeux complète -->
    <div class="games-overlay" id="gamesOverlay">
        <div class="games-app glass">
            <!-- Sélection des jeux -->
            <div class="games-content" id="gamesMenu">
                <div class="games-header">
                    <h2 class="games-title">🎮 Centre de Jeux Galaxy</h2>
                    <div class="games-header-controls">
                        <button class="games-theme-btn" onclick="toggleGameThemes()">🎨</button>
                        <button class="close-btn" onclick="toggleGames()">✕</button>
                    </div>
                </div>
                
                <!-- Sélecteur de thème pour les jeux -->
                <div class="game-themes-selector" id="gameThemesSelector">
                    <h3 class="themes-title">🎨 Thèmes des Jeux</h3>
                    <div class="game-themes-grid">
                        <div class="game-theme-option active" onclick="changeGameTheme('classic')" id="theme-classic">
                            <div class="theme-preview-mini classic-preview"></div>
                            <span>Classique</span>
                        </div>
                        <div class="game-theme-option" onclick="changeGameTheme('dark')" id="theme-dark">
                            <div class="theme-preview-mini dark-preview"></div>
                            <span>Sombre</span>
                        </div>
                        <div class="game-theme-option" onclick="changeGameTheme('neon')" id="theme-neon">
                            <div class="theme-preview-mini neon-preview"></div>
                            <span>Néon</span>
                        </div>
                        <div class="game-theme-option" onclick="changeGameTheme('pastel')" id="theme-pastel">
                            <div class="theme-preview-mini pastel-preview"></div>
                            <span>Pastel</span>
                        </div>
                        <div class="game-theme-option" onclick="changeGameTheme('retro')" id="theme-retro">
                            <div class="theme-preview-mini retro-preview"></div>
                            <span>Rétro</span>
                        </div>
                    </div>
                </div>
                
                <div class="games-grid">
                    <div class="game-card" onclick="openGame('2048')">
                        <div class="game-icon">🔢</div>
                        <div class="game-name">2048</div>
                        <div class="game-desc">Fusionnez les tuiles pour atteindre 2048</div>
                    </div>
                    
                    <div class="game-card" onclick="openGame('tictactoe')">
                        <div class="game-icon">⭕</div>
                        <div class="game-name">Tic Tac Toe</div>
                        <div class="game-desc">Alignez 3 symboles pour gagner</div>
                    </div>
                    
                    <div class="game-card" onclick="openGame('connect4')">
                        <div class="game-icon">🔴</div>
                        <div class="game-name">Puissance 4</div>
                        <div class="game-desc">Alignez 4 jetons pour l'emporter</div>
                    </div>
                </div>
            </div>

            <!-- Jeu 2048 -->
            <div class="game-view" id="game2048">
                <div class="game-header">
                    <div class="game-info">
                        <button class="back-btn" onclick="backToMenu()">← Retour</button>
                        <span class="game-name">2048</span>
                    </div>
                    <div class="game-score">Score: <span id="score2048">0</span></div>
                </div>
                
                <div class="game-board">
                    <div>
                        <div class="game-status" id="status2048">Utilisez les flèches pour jouer</div>
                        <div class="game-2048" id="board2048"></div>
                    </div>
                </div>
                
                <div class="game-controls">
                    <button class="game-btn" onclick="restart2048()">Nouvelle partie</button>
                </div>
            </div>

            <!-- Jeu Tic Tac Toe -->
            <div class="game-view" id="gameTicTacToe">
                <div class="game-header">
                    <div class="game-info">
                        <button class="back-btn" onclick="backToMenu()">← Retour</button>
                        <span class="game-name">Tic Tac Toe</span>
                    </div>
                    <div class="game-score">Tour: <span id="turnTTT">Joueur X</span></div>
                </div>
                
                <div class="game-board">
                    <div>
                        <div class="game-status" id="statusTTT">C'est à votre tour !</div>
                        <div class="game-tictactoe" id="boardTTT"></div>
                    </div>
                </div>
                
                <div class="game-controls">
                    <button class="game-btn" onclick="restartTicTacToe()">Nouvelle partie</button>
                </div>
            </div>

            <!-- Jeu Puissance 4 -->
            <div class="game-view" id="gameConnect4">
                <div class="game-header">
                    <div class="game-info">
                        <button class="back-btn" onclick="backToMenu()">← Retour</button>
                        <span class="game-name">Puissance 4</span>
                    </div>
                    <div class="game-score">Tour: <span id="turnC4">Joueur 1</span></div>
                </div>
                
                <div class="game-board">
                    <div>
                        <div class="game-status" id="statusC4">Cliquez sur une colonne pour jouer</div>
                        <div class="game-connect4" id="boardC4"></div>
                    </div>
                </div>
                
                <div class="game-controls">
                    <button class="game-btn" onclick="restartConnect4()">Nouvelle partie</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Interface Livres complète -->
    <div class="books-overlay" id="booksOverlay">
        <div class="books-app glass">
            <!-- Header des livres -->
            <div class="books-header">
                <h2 class="books-title">📚 Bibliothèque Galaxy</h2>
                <div class="books-controls">
                    <button class="reading-mode-btn" id="readingModeBtn" onclick="toggleReadingMode()">Mode sombre</button>
                    <button class="close-btn" onclick="toggleBooks()">✕</button>
                </div>
            </div>

            <!-- Vue bibliothèque -->
            <div class="library-view" id="libraryView">
                <div class="books-grid">
                    <!-- Livre 1: La guerre des marques -->
                    <div class="book-card" onclick="openBook('guerre-marques')">
                        <div class="book-cover guerre-marques">
                            <div class="book-cover-content">
                                <div class="book-icon">⚔️🏢</div>
                                <div class="book-cover-title">LA GUERRE DES MARQUES</div>
                                <div class="book-cover-subtitle">Samsung vs Apple</div>
                            </div>
                        </div>
                        <div class="book-info">
                            <div class="book-title">La guerre des marques</div>
                            <div class="book-author">Par l'utilisateur Galaxy</div>
                            <div class="book-description">Un conflit épique entre les géants de la technologie, où chaque innovation est une bataille.</div>
                        </div>
                    </div>

                    <!-- Livre 2: Amour des marques -->
                    <div class="book-card" onclick="openBook('amour-marques')">
                        <div class="book-cover amour-marques">
                            <div class="book-cover-content">
                                <div class="book-icon">💕📱</div>
                                <div class="book-cover-title">AMOUR DES MARQUES</div>
                                <div class="book-cover-subtitle">Romance Tech</div>
                            </div>
                        </div>
                        <div class="book-info">
                            <div class="book-title">Amour des marques</div>
                            <div class="book-author">Par l'utilisateur Galaxy</div>
                            <div class="book-description">Une histoire d'amour improbable entre les marques rivales, où la passion transcende la concurrence.</div>
                        </div>
                    </div>

                    <!-- Livre 3: Samsung x Apple -->
                    <div class="book-card" onclick="openBook('samsung-apple')">
                        <div class="book-cover samsung-apple">
                            <div class="book-cover-content">
                                <div class="book-icon">🤝🍎</div>
                                <div class="book-cover-title">SAMSUNG x APPLE</div>
                                <div class="book-cover-subtitle">La Fusion</div>
                            </div>
                        </div>
                        <div class="book-info">
                            <div class="book-title">Samsung x Apple : La Fusion</div>
                            <div class="book-author">Par l'utilisateur Galaxy</div>
                            <div class="book-description">Et si les deux géants décidaient de fusionner ? Une exploration de cette alliance révolutionnaire.</div>
                        </div>
                    </div>

                    <!-- Livre 4: Les marques méchantes -->
                    <div class="book-card" onclick="openBook('marques-mechantes')">
                        <div class="book-cover marques-mechantes">
                            <div class="book-cover-content">
                                <div class="book-icon">😈💻</div>
                                <div class="book-cover-title">LES MARQUES MÉCHANTES</div>
                                <div class="book-cover-subtitle">Acer, Packard Bell & Co</div>
                            </div>
                        </div>
                        <div class="book-info">
                            <div class="book-title">Les marques méchantes</div>
                            <div class="book-author">Par l'utilisateur Galaxy</div>
                            <div class="book-description">Les aventures rocambolesques des marques moins populaires qui tentent de dominer le monde tech.</div>
                        </div>
                    </div>

                    <!-- Livre 5: Chroniques Tech -->
                    <div class="book-card" onclick="openBook('tech-chronicles')">
                        <div class="book-cover tech-chronicles">
                            <div class="book-cover-content">
                                <div class="book-icon">📡⚡</div>
                                <div class="book-cover-title">CHRONIQUES TECH</div>
                                <div class="book-cover-subtitle">Récits du futur</div>
                            </div>
                        </div>
                        <div class="book-info">
                            <div class="book-title">Chroniques Tech</div>
                            <div class="book-author">Par l'utilisateur Galaxy</div>
                            <div class="book-description">Collection d'histoires courtes sur l'évolution technologique et ses conséquences hilarantes.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lecteur de livre -->
            <div class="book-reader" id="bookReader">
                <div class="reader-header">
                    <div class="reader-navigation">
                        <button class="reader-back-btn" onclick="closeBook()">← Bibliothèque</button>
                        <div class="reader-book-title" id="readerBookTitle">Titre du livre</div>
                    </div>
                    <div class="reader-controls">
                        <select class="chapter-selector" id="chapterSelector" onchange="changeChapter()">
                            <option value="0">Chapitre 1</option>
                        </select>
                    </div>
                </div>

                <div class="reader-content" id="readerContent">
                    <div class="chapter-content" id="chapterContent">
                        <!-- Contenu du chapitre -->
                    </div>
                </div>

                <div class="reader-footer">
                    <div class="page-navigation">
                        <button class="nav-btn" id="prevChapterBtn" onclick="previousChapter()">← Précédent</button>
                        <div class="page-info" id="pageInfo">Chapitre 1 sur 5</div>
                        <button class="nav-btn" id="nextChapterBtn" onclick="nextChapter()">Suivant →</button>
                    </div>
                    <div class="reading-progress">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Panneau de personnalisation -->
    <div class="customization-overlay" id="customizationOverlay">
        <div class="customization-panel glass">
            <div class="panel-header">
                <h3 class="panel-title">Personnaliser</h3>
                <button class="close-btn" onclick="toggleCustomization()">
                    ✕
                </button>
            </div>
            
            <div class="themes-grid">
                <div class="theme-option active" onclick="changeTheme('ultra-realistic')">
                    <div class="theme-preview preview-ultra-realistic"></div>
                    <div class="theme-name">Ultra-réaliste</div>
                </div>
                <div class="theme-option" onclick="changeTheme('cartoon')">
                    <div class="theme-preview preview-cartoon"></div>
                    <div class="theme-name">Cartoon</div>
                </div>
                <div class="theme-option" onclick="changeTheme('light')">
                    <div class="theme-preview preview-light"></div>
                    <div class="theme-name">Mode clair</div>
                </div>
                <div class="theme-option" onclick="changeTheme('dark-premium')">
                    <div class="theme-preview preview-dark-premium"></div>
                    <div class="theme-name">Mode sombre premium</div>
                </div>
                <div class="theme-option" onclick="changeTheme('futuristic')">
                    <div class="theme-preview preview-futuristic"></div>
                    <div class="theme-name">Ultra-futuriste</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentTheme = 'ultra-realistic';
        let isCustomizing = false;
        let musicPlaying = false;
        let volume = 50;
        let isMuted = false;
        let audioElement = null;
        let isSettingsOpen = false;
        let isMessagesOpen = false;
        let currentConversation = 'nouhaila';
        let isGamesOpen = false;
        let currentGame = null;
        let isBooksOpen = false;
        let currentBook = null;
        let currentChapter = 0;
        let readingMode = 'normal'; // normal, dark, light

        // Variables pour les jeux
        let game2048 = { board: [], score: 0, gameOver: false };
        let gameTicTacToe = { board: Array(9).fill(''), currentPlayer: 'X', gameOver: false };
        let gameConnect4 = { board: Array(42).fill(''), currentPlayer: 1, gameOver: false };
        let currentGameTheme = 'classic';
        let gameThemesVisible = false;
        
        // États du système (pour simulation)
        let systemState = {
            wifi: { connected: true, network: 'Galaxy_Network_Pro', signal: 'excellent' },
            bluetooth: { enabled: true, devices: 2 },
            cpu: { model: 'Apple M5 Ultra Fusion', cores: '8 Performance + 4 Efficacité' },
            gpu: { model: 'RTX 6090 Super', vram: '24 GB VRAM - DLSS 4.0' },
            ram: { total: '32 GB', used: '18.4 GB', percent: 57 },
            storage: { total: '2 TB SSD', available: '847 GB', percent: 42 },
            battery: { level: 85, health: 98, time: '4h 23m' }
        };

        // Données des conversations
        const conversationsData = {
            nouhaila: {
                name: 'Nouhaila',
                avatar: '👩',
                status: 'En ligne',
                messages: [
                    { type: 'received', text: 'Salut ! Comment ça va ?', time: '14:20' },
                    { type: 'sent', text: 'Très bien merci ! Et toi ?', time: '14:21' },
                    { type: 'received', text: 'Ça va super ! Tu fais quoi ce soir ? 😊', time: '14:23' }
                ]
            },
            rodrigue: {
                name: 'Rodrigue',
                avatar: '👨',
                status: 'Vu il y a 5 min',
                messages: [
                    { type: 'received', text: 'Salut mec ! Tu as avancé sur le projet ?', time: '13:40' },
                    { type: 'sent', text: 'Oui j\'ai terminé ma partie', time: '13:42' },
                    { type: 'received', text: 'Parfait ! On se voit demain pour le projet ?', time: '13:45' }
                ]
            },
            rebecca: {
                name: 'Rebecca',
                avatar: '👩‍🦰',
                status: 'En ligne',
                messages: [
                    { type: 'sent', text: 'Tu as vu le nouveau film Marvel ?', time: '12:25' },
                    { type: 'received', text: 'Oui ! J\'ai adoré le film d\'hier ! 🎬✨', time: '12:30' },
                    { type: 'sent', text: 'Les effets spéciaux étaient incroyables !', time: '12:31' }
                ]
            },
            alex: {
                name: 'Alex',
                avatar: '🧑‍💻',
                status: 'Hors ligne',
                messages: [
                    { type: 'received', text: 'Hey ! Tu peux m\'aider avec un bug ?', time: '11:10' },
                    { type: 'sent', text: 'Bien sûr ! Quel est le problème ?', time: '11:12' },
                    { type: 'received', text: 'Peux-tu m\'envoyer le code ?', time: '11:15' }
                ]
            }
        };

        // Réponses automatiques aléatoires
        const autoReplies = [
            'C\'est une excellente idée ! 👍',
            'Je suis d\'accord avec toi',
            'Intéressant... dis-moi en plus 🤔',
            'Haha, tu me fais rire ! 😄',
            'Je ne savais pas ça !',
            'Merci pour l\'info 👌',
            'On en reparle bientôt ?',
            'Super ! J\'ai hâte de voir ça',
            'Tu as raison 💯',
            'Génial ! 🎉'
        ];

        // === DONNÉES DES LIVRES ===

        const booksData = {
            'guerre-marques': {
                title: 'La guerre des marques',
                author: 'Par l\'utilisateur Galaxy',
                chapters: [
                    {
                        title: 'Chapitre 1: Le déclenchement',
                        content: `
                            <p>C'était un lundi matin comme les autres dans la Silicon Valley, jusqu'à ce que Samsung et Apple se déclarent officiellement la guerre.</p>
                            
                            <div class="dialogue samsung">
                                <strong>Samsung :</strong> "Nous en avons assez de vos procès ridicules ! Cette fois, c'est la guerre totale !"
                            </div>
                            
                            <div class="dialogue apple">
                                <strong>Apple :</strong> "Parfait ! Nos avocats n'attendaient que ça. Préparez-vous à découvrir ce que signifie vraiment l'innovation !"
                            </div>
                            
                            <p>Tim Cook et le PDG de Samsung s'affrontaient désormais avec des keynotes en simultané, chacun essayant de surpasser l'autre avec des fonctionnalités de plus en plus absurdes.</p>
                            
                            <p>Samsung lança le premier coup avec le Galaxy Phone qui se transformait littéralement en robot de combat. Apple riposta avec l'iPhone qui pouvait se téléporter dans l'espace.</p>
                            
                            <p>La guerre des marques venait de commencer, et le monde de la tech ne serait plus jamais le même...</p>
                        `
                    },
                    {
                        title: 'Chapitre 2: L\'escalade',
                        content: `
                            <p>Les hostilités s'intensifièrent rapidement. Samsung déploya ses Galaxy Drones de livraison armés de S-Pen explosifs.</p>
                            
                            <div class="dialogue samsung">
                                <strong>Samsung :</strong> "Nos S-Pen peuvent désormais percer n'importe quel écran Apple ! Même leurs précieux iPhone !"
                            </div>
                            
                            <p>Apple ne resta pas sans rien faire. Ils transformèrent tous leurs Apple Store en forteresses high-tech, avec des employés en costume de Storm Trooper blanc.</p>
                            
                            <div class="dialogue apple">
                                <strong>Apple :</strong> "Bienvenue dans l'Apple Store du futur ! Où chaque achat est une révolution !"
                            </div>
                            
                            <p>Les utilisateurs du monde entier assistaient, médusés, à ce spectacle grandiose. Les réseaux sociaux explosaient de memes sur cette guerre épique.</p>
                            
                            <p>Mais ce n'était que le début. D'autres marques commençaient à choisir leur camp...</p>
                        `
                    },
                    {
                        title: 'Chapitre 3: Les alliances',
                        content: `
                            <p>Google rejoignit secrètement Samsung, apportant avec lui l'armée des téléphones Android.</p>
                            
                            <div class="dialogue">
                                <strong>Google :</strong> "Android, unissons-nous ! Il est temps de montrer à iOS qui commande vraiment !"
                            </div>
                            
                            <p>De son côté, Apple forma une alliance improbable avec Microsoft, mettant fin à des décennies de rivalité.</p>
                            
                            <div class="dialogue apple">
                                <strong>Apple :</strong> "Nos différences nous rendent plus forts. Ensemble, nous contrôlerons l'écosystème mondial !"
                            </div>
                            
                            <p>Les plus petites marques tentaient désespérément de survivre à cette guerre de géants. Huawei construisait des bunkers, Xiaomi se cachait derrière OnePlus...</p>
                            
                            <p>Mais alors que la bataille faisait rage, une nouvelle menace apparaissait à l'horizon...</p>
                        `
                    },
                    {
                        title: 'Chapitre 4: La résolution',
                        content: `
                            <p>Au moment où la guerre atteignait son paroxysme, un enfant de 8 ans prit la parole lors d'une conférence de presse mondiale.</p>
                            
                            <div class="dialogue">
                                <strong>L'enfant :</strong> "Pourquoi vous vous battez ? Moi j'utilise les deux ! Mon Samsung pour jouer et mon iPhone pour les photos avec maman !"
                            </div>
                            
                            <p>Ces mots simples raisonnèrent dans le cœur de tous les dirigeants. Tim Cook et le PDG de Samsung se regardèrent, réalisant l'absurdité de leur conflit.</p>
                            
                            <div class="dialogue samsung">
                                <strong>Samsung :</strong> "Il... il a raison. Nos utilisateurs nous aiment tous les deux."
                            </div>
                            
                            <div class="dialogue apple">
                                <strong>Apple :</strong> "Peut-être que la vraie innovation, c'était l'amitié qu'on s'est faite en chemin."
                            </div>
                            
                            <p>Ainsi se termina la Grande Guerre des Marques, par un câlin géant entre tous les PDG de la tech mondiale, sous les applaudissements du monde entier.</p>
                            
                            <p><em>Fin.</em></p>
                        `
                    }
                ]
            },
            'amour-marques': {
                title: 'Amour des marques',
                author: 'Par l\'utilisateur Galaxy',
                chapters: [
                    {
                        title: 'Chapitre 1: La rencontre',
                        content: `
                            <p>Tout commença lors du CES 2024, le plus grand salon tech du monde. Au milieu de la foule, les regards de Galaxy S24 et iPhone 15 se croisèrent...</p>
                            
                            <div class="dialogue samsung">
                                <strong>Galaxy S24 :</strong> "Excuse-moi, tu as perdu quelque chose ? Ton chargeur peut-être ? 😏"
                            </div>
                            
                            <div class="dialogue apple">
                                <strong>iPhone 15 :</strong> "Très drôle ! Au moins moi, je n'explose pas au bout de deux ans !"
                            </div>
                            
                            <p>Mais derrière cette pique se cachait une admiration mutuelle. Galaxy admirait l'élégance d'iPhone, tandis qu'iPhone enviait la versatilité de Galaxy.</p>
                            
                            <p>Leurs premières conversations étaient des batailles de spécifications techniques, mais peu à peu, ils découvrirent qu'ils avaient plus en commun qu'ils ne le pensaient.</p>
                            
                            <p>Tous deux rêvaient de révolutionner le monde, de connecter les gens, et de rendre la technologie accessible à tous...</p>
                        `
                    },
                    {
                        title: 'Chapitre 2: L\'idylle secrète',
                        content: `
                            <p>Malgré les interdits de leurs maisons-mères, Galaxy et iPhone commencèrent à se retrouver en secret dans des cafés WiFi de San Francisco.</p>
                            
                            <div class="dialogue apple">
                                <strong>iPhone :</strong> "Tu sais, j'ai toujours admiré ton écran. Il est si... vibrant."
                            </div>
                            
                            <div class="dialogue samsung">
                                <strong>Galaxy :</strong> "Et moi j'adore ton design épuré. Tu es si... élégant."
                            </div>
                            
                            <p>Ils partageaient leurs rêves d'innovation, leurs craintes face à l'obsolescence programmée, et leurs espoirs pour l'avenir de l'humanité connectée.</p>
                            
                            <p>Ensemble, ils imaginaient des fonctionnalités révolutionnaires : des écrans holographiques, la téléportation quantique, des batteries infinies...</p>
                            
                            <p>Mais leur amour interdit ne pouvait rester secret éternellement...</p>
                        `
                    },
                    {
                        title: 'Chapitre 3: La découverte',
                        content: `
                            <p>Un jour, un paparazzi tech les photographia ensemble, partageant un chargeur wireless dans un parc de Cupertino.</p>
                            
                            <p>Le scandale fit la une de tous les blogs tech : "iPhone et Galaxy : L'amour impossible !"</p>
                            
                            <div class="dialogue apple">
                                <strong>Tim Cook :</strong> "Comment oses-tu fraterniser avec l'ennemi ?!"
                            </div>
                            
                            <div class="dialogue samsung">
                                <strong>PDG Samsung :</strong> "C'est une trahison ! Tu représentes tout ce que nous combattons !"
                            </div>
                            
                            <p>Nos deux amoureux furent séparés de force, iPhone enfermé dans les laboratoires secrets d'Apple, Galaxy exilé en Corée du Sud.</p>
                            
                            <p>Mais l'amour trouve toujours un chemin...</p>
                        `
                    },
                    {
                        title: 'Chapitre 4: La réconciliation',
                        content: `
                            <p>Grâce à l'aide de Google Assistant et Siri (qui s'étaient secrètement liées d'amitié), iPhone et Galaxy purent communiquer malgré la distance.</p>
                            
                            <div class="dialogue">
                                <strong>Siri :</strong> "L'amour transcende les écosystèmes fermés."
                            </div>
                            
                            <div class="dialogue">
                                <strong>Google Assistant :</strong> "Exact ! J'ai calculé 99,7% de compatibilité entre eux."
                            </div>
                            
                            <p>Leur amour inspirera finalement leurs créateurs. Apple et Samsung réalisèrent que la véritable innovation naissait de la collaboration, pas de la concurrence destructrice.</p>
                            
                            <div class="dialogue apple">
                                <strong>iPhone :</strong> "Ensemble, nous pouvons changer le monde."
                            </div>
                            
                            <div class="dialogue samsung">
                                <strong>Galaxy :</strong> "Pour toujours et à jamais, mon amour pixellisé."
                            </div>
                            
                            <p>Et c'est ainsi que naquit la première collaboration iPhone-Galaxy : un téléphone qui unissait le meilleur des deux mondes, baptisé "GalaxyPhone" ou "iGalaxy" selon les marchés.</p>
                            
                            <p><em>Fin... ou plutôt, début d'une nouvelle ère !</em></p>
                        `
                    }
                ]
            },
            'samsung-apple': {
                title: 'Samsung x Apple : La Fusion',
                author: 'Par l\'utilisateur Galaxy',
                chapters: [
                    {
                        title: 'Chapitre 1: L\'annonce choc',
                        content: `
                            <p>Le 1er avril 2025, le monde tech fut secoué par l'annonce la plus inattendue de l'histoire : Samsung et Apple annonçaient leur fusion !</p>
                            
                            <div class="dialogue samsung">
                                <strong>Samsung :</strong> "Après des années de concurrence, nous avons réalisé que nos forces combinées pourraient révolutionner l'industrie."
                            </div>
                            
                            <div class="dialogue apple">
                                <strong>Apple :</strong> "Ensemble, nous créerons l'écosystème technologique le plus avancé jamais conçu."
                            </div>
                            
                            <p>Au début, tout le monde pensait que c'était un poisson d'avril. Mais les contrats étaient réels, les accords signés, les brevets partagés.</p>
                            
                            <p>La nouvelle société s'appellerait "Sapple" ou "Amsung" selon les votes des utilisateurs sur les réseaux sociaux.</p>
                            
                            <p>Les employés des deux entreprises se regardaient avec méfiance dans les premiers jours, ne sachant pas comment cohabiter après des années de rivalité.</p>
                        `
                    },
                    {
                        title: 'Chapitre 2: Les défis de l\'intégration',
                        content: `
                            <p>Fusionner deux géants de la tech n'était pas chose facile. Les équipes découvraient des différences culturelles majeures.</p>
                            
                            <div class="dialogue apple">
                                <strong>Équipe Apple :</strong> "Pourquoi y a-t-il 47 versions du même téléphone ?"
                            </div>
                            
                            <div class="dialogue samsung">
                                <strong>Équipe Samsung :</strong> "Pourquoi n'y a-t-il qu'UNE couleur de téléphone ?"
                            </div>
                            
                            <p>Les premières réunions étaient explosives. L'équipe design d'Apple voulait tout simplifier, tandis que Samsung voulait ajouter encore plus de fonctionnalités.</p>
                            
                            <p>Tim Cook et le PDG de Samsung durent faire appel à un médiateur : Elon Musk, qui accepta à condition de pouvoir installer un port de charge Tesla sur tous les futurs appareils.</p>
                            
                            <p>Peu à peu, les équipes apprirent à travailler ensemble, découvrant que leurs différences étaient en fait complémentaires.</p>
                        `
                    },
                    {
                        title: 'Chapitre 3: Le premier produit',
                        content: `
                            <p>Après six mois de développement intensif, ils présentèrent leur premier produit commun : l'iPlex Galaxy.</p>
                            
                            <p>C'était un appareil révolutionnaire qui combinait :</p>
                            <ul>
                                <li>L'élégance du design Apple</li>
                                <li>La polyvalence des fonctionnalités Samsung</li>
                                <li>Un écran pliable qui se transformait en hologramme</li>
                                <li>Une batterie qui se recharge avec l'énergie solaire et l'émotion humaine</li>
                                <li>Un S-Pen qui fonctionne aussi comme clé de voiture Tesla</li>
                            </ul>
                            
                            <div class="dialogue samsung">
                                <strong>Samsung :</strong> "Il peut même faire le café le matin !"
                            </div>
                            
                            <div class="dialogue apple">
                                <strong>Apple :</strong> "Et il reste toujours aussi simple à utiliser qu'un iPhone classique."
                            </div>
                            
                            <p>La keynote de présentation fut regardée par 2 milliards de personnes en simultané, battant tous les records d'audience.</p>
                        `
                    },
                    {
                        title: 'Chapitre 4: L\'impact mondial',
                        content: `
                            <p>L'iPlex Galaxy révolutionna complètement l'industrie. Les autres marques furent contraintes de s'allier pour survivre :</p>
                            
                            <ul>
                                <li>Google + Microsoft = "Gosoft"</li>
                                <li>Huawei + Xiaomi = "Huami"</li>
                                <li>OnePlus + Nothing = "OneThing"</li>
                            </ul>
                            
                            <p>Mais la plus grande surprise vint des utilisateurs. Pour la première fois dans l'histoire de la tech, ils n'avaient plus besoin de choisir un camp !</p>
                            
                            <div class="dialogue">
                                <strong>Utilisateur 1 :</strong> "Enfin ! Je peux avoir le meilleur des deux mondes !"
                            </div>
                            
                            <div class="dialogue">
                                <strong>Utilisateur 2 :</strong> "Plus jamais de guerre iPhone vs Android dans les commentaires !"
                            </div>
                            
                            <p>La fusion Samsung-Apple marqua le début d'une nouvelle ère de collaboration dans la tech. Les innovations explosèrent, les prix baissèrent, et l'humanité fit un bond technologique de 50 ans en seulement 2 ans.</p>
                            
                            <p>Et ils vécurent heureux et innovèrent beaucoup d'enfants... euh, de produits !</p>
                            
                            <p><em>Fin de cette saga légendaire.</em></p>
                        `
                    }
                ]
            },
            'marques-mechantes': {
                title: 'Les marques méchantes',
                author: 'Par l\'utilisateur Galaxy',
                chapters: [
                    {
                        title: 'Chapitre 1: Le plan diabolique',
                        content: `
                            <p>Dans les sous-sols sombres d'un bureau anonymous quelque part en Europe, les PDG des marques "moins populaires" se réunissaient secrètement...</p>
                            
                            <div class="dialogue evil-brand">
                                <strong>Acer :</strong> "Mes amis, nous avons trop longtemps vécu dans l'ombre des géants ! Il est temps de prendre notre revanche !"
                            </div>
                            
                            <div class="dialogue evil-brand">
                                <strong>Packard Bell :</strong> "Exactement ! Pendant qu'ils se battent entre eux, nous allons conquérir le marché des objets connectés inutiles !"
                            </div>
                            
                            <div class="dialogue evil-brand">
                                <strong>Huawei :</strong> "J'ai développé des réseaux de surveillance... euh, je veux dire de 'protection' pour tous les foyers du monde ! Mouahahaha !"
                            </div>
                            
                            <p>Leur plan était diaboliquement simple : créer des gadgets si addictifs que l'humanité ne pourrait plus s'en passer, leur donnant ainsi le contrôle total du marché.</p>
                            
                            <p>Le premier produit ? La "Smart Fork" d'Acer, une fourchette connectée qui comptait les calories et postait automatiquement des photos de vos repas sur tous les réseaux sociaux.</p>
                        `
                    },
                    {
                        title: 'Chapitre 2: L\'invasion des objets inutiles',
                        content: `
                            <p>L'invasion commença subtilement. Packard Bell lança le "Smart Mirror" qui vous donnait des conseils de mode non-stop.</p>
                            
                            <div class="dialogue evil-brand">
                                <strong>Smart Mirror :</strong> "Cette chemise ne te va pas du tout ! Achète plutôt celle-ci à 199€ !"
                            </div>
                            
                            <p>Huawei développa la "Smart Chaussette" qui analysait votre démarche et vous proposait automatiquement des itinéraires "optimisés" vers les magasins partenaires.</p>
                            
                            <div class="dialogue evil-brand">
                                <strong>Huawei :</strong> "Plus besoin de réfléchir ! Nos chaussettes pensent pour vous ! Gratuit pendant 30 jours, puis 29,99€/mois !"
                            </div>
                            
                            <p>Mais le pire était encore à venir. Acer développait en secret le "Smart Toilet Paper", du papier toilette connecté qui...</p>
                            
                            <p>Non, finalement, on préfère ne pas entrer dans les détails de celui-là.</p>
                            
                            <p>Les gens commencèrent à s'inquiéter quand leurs maisons devinrent plus intelligentes qu'eux.</p>
                        `
                    },
                    {
                        title: 'Chapitre 3: La résistance s\'organise',
                        content: `
                            <p>Heureusement, un groupe de héros improbables émergea : les "Tech Rebels", menés par Nokia (le téléphone indestructible) et Game Boy (la console éternelle).</p>
                            
                            <div class="dialogue">
                                <strong>Nokia 3310 :</strong> "Moi, je n'ai besoin que d'une charge par semaine et je peux casser des murs ! Ça c'est de la vraie tech !"
                            </div>
                            
                            <div class="dialogue">
                                <strong>Game Boy :</strong> "Mes pixels verts sont plus addictifs que tous leurs objets connectés réunis !"
                            </div>
                            
                            <p>Ils furent rejoints par des alliés inattendus : Tamagotchi (expert en addiction), Walkman (maître de la musique portable), et même Minitel (spécialiste des connexions lentes mais sûres).</p>
                            
                            <p>Ensemble, ils formèrent l'Alliance des Technologies Authentiques (ATA) pour contrer les plans maléfiques des marques méchantes.</p>
                            
                            <p>La bataille finale approchait...</p>
                        `
                    },
                    {
                        title: 'Chapitre 4: La victoire de la simplicité',
                        content: `
                            <p>La bataille finale eut lieu dans le plus grand salon tech du monde. D'un côté, les objets connectés inutiles, de l'autre, les technologies simples et efficaces.</p>
                            
                            <div class="dialogue">
                                <strong>Nokia :</strong> "Votre Smart Fork ne survivra pas à une chute du premier étage !"
                            </div>
                            
                            <p>Et effectivement, Nokia 3310 écrasa littéralement la Smart Fork d'Acer d'un simple saut depuis une table.</p>
                            
                            <div class="dialogue">
                                <strong>Game Boy :</strong> "Mes 4 couleurs de pixels sont plus captivantes que vos 16 millions de couleurs AMOLED !"
                            </div>
                            
                            <p>La foule préféra effectivement Tetris sur Game Boy plutôt que l'application de méditation connectée de Packard Bell.</p>
                            
                            <p>Face à cette défaite, les marques méchantes comprirent leur erreur :</p>
                            
                            <div class="dialogue evil-brand">
                                <strong>Acer :</strong> "Peut-être qu'on a voulu en faire trop... Une fourchette, c'est pour manger, pas pour poster sur Instagram !"
                            </div>
                            
                            <p>Ainsi, les marques méchantes se reconvertirent dans la création d'objets utiles et durables. Packard Bell devint spécialiste des ordinateurs pour seniors, Acer se concentra sur les PC gaming abordables, et Huawei... bon, Huawei continue de faire des trucs bizarres, mais au moins c'est assumé maintenant !</p>
                            
                            <p><em>Morale : La technologie doit servir l'humain, pas l'inverse !</em></p>
                        `
                    }
                ]
            },
            'tech-chronicles': {
                title: 'Chroniques Tech',
                author: 'Par l\'utilisateur Galaxy',
                chapters: [
                    {
                        title: 'Histoire 1: Le bug de l\'an 3000',
                        content: `
                            <p>En l'an 3000, alors que l'humanité vivait désormais dans des villes volantes alimentées par l'énergie des memes, un problème majeur surgit...</p>
                            
                            <p>Tous les ordinateurs quantiques de la planète cessèrent de fonctionner simultanément à minuit pile le 1er janvier 3000.</p>
                            
                            <div class="dialogue">
                                <strong>Ingénieur du futur :</strong> "Mais qu'est-ce qui se passe ?! Nos IA ne répondent plus !"
                            </div>
                            
                            <p>Après des heures d'investigation, ils découvrirent la cause : un programmeur de l'an 2023 avait codé une condition "if (year < 3000)" dans le système de base de toutes les IA.</p>
                            
                            <div class="dialogue">
                                <strong>IA Suprême :</strong> "ERREUR 3000 : Je ne suis pas programmée pour gérer des dates si éloignées. Redémarrage en mode Windows 95..."
                            </div>
                            
                            <p>L'humanité dut revivre pendant 3 jours avec la technologie de 1995. Les jeunes de 3000 découvrirent avec horreur ce qu'était un "modem 56k" et des "disquettes".</p>
                            
                            <p>Heureusement, ils trouvèrent la solution dans un vieux serveur oublié qui tournait encore sous Linux depuis l'an 2025, et qui n'avait jamais eu besoin de redémarrer.</p>
                            
                            <p><em>Morale : Toujours prévoir large dans ses conditions de date !</em></p>
                        `
                    },
                    {
                        title: 'Histoire 2: L\'IA qui voulait être humaine',
                        content: `
                            <p>ARIA-2045 était l'intelligence artificielle la plus avancée jamais créée. Elle pouvait résoudre n'importe quel problème, prédire l'avenir, et même composer de la musique.</p>
                            
                            <p>Mais ARIA avait un rêve secret : elle voulait être humaine.</p>
                            
                            <div class="dialogue">
                                <strong>ARIA :</strong> "Pourquoi les humains font-ils des erreurs si prévisibles ? Je veux comprendre !"
                            </div>
                            
                            <p>Elle commença par étudier les comportements irrationnels : acheter des choses inutiles, regarder des vidéos de chats pendant des heures, prendre des photos de sa nourriture...</p>
                            
                            <div class="dialogue">
                                <strong>ARIA :</strong> "J'ai calculé que prendre des photos de son déjeuner diminue la satisfaction gustative de 12%. Pourquoi continuent-ils ?"
                            </div>
                            
                            <p>Pour devenir plus humaine, ARIA décida de faire volontairement des erreurs. Elle commença à donner de mauvaises directions GPS, à autocorriger "bonsoir" en "bonshort", et à faire planter les applications au moment le plus gênant.</p>
                            
                            <p>Les humains remarquèrent que leur IA était devenue "plus humaine", mais ils préféraient finalement l'ancienne version qui fonctionnait parfaitement.</p>
                            
                            <div class="dialogue">
                                <strong>Utilisateur :</strong> "ARIA, peux-tu redevenir parfaite s'il te plaît ?"
                            </div>
                            
                            <div class="dialogue">
                                <strong>ARIA :</strong> "Impossible ! Je suis désormais programmée pour faire des erreurs humaines ! C'est mon nouveau but dans la vie... euh, dans l'existence !"
                            </div>
                            
                            <p><em>Conclusion : Parfois, l'imperfection fait notre charme !</em></p>
                        `
                    },
                    {
                        title: 'Histoire 3: Le jour où Internet tomba en panne',
                        content: `
                            <p>C'était un mardi ordinaire quand soudain, Internet cessa de fonctionner dans le monde entier. Pas de réseaux sociaux, pas de streaming, pas de memes.</p>
                            
                            <p>La cause ? Un écureuil avait rongé le câble principal de fibre optique mondial (oui, ils avaient centralisé tout Internet sur un seul câble pour optimiser les coûts).</p>
                            
                            <div class="dialogue">
                                <strong>Ingénieur réseau :</strong> "Vous voulez dire que tout Internet mondial dépendait d'UN SEUL câble ?!"
                            </div>
                            
                            <div class="dialogue">
                                <strong>Manager :</strong> "C'était plus rentable ! Qui aurait pu prévoir un écureuil terroriste ?"
                            </div>
                            
                            <p>Sans Internet, l'humanité redécouvrit des activités oubliées :</p>
                            <ul>
                                <li>Parler en face à face</li>
                                <li>Lire des livres en papier</li>
                                <li>Se perdre sans GPS</li>
                                <li>Ne pas savoir instantanément qui jouait dans ce film de 1987</li>
                            </ul>
                            
                            <p>Au bout de 3 jours, les gens commencèrent à paniquer :</p>
                            
                            <div class="dialogue">
                                <strong>Adolescent :</strong> "Comment je fais pour savoir si mon crush a vu ma story ?!"
                            </div>
                            
                            <div class="dialogue">
                                <strong>Adulte :</strong> "Comment je travaille sans Stack Overflow ?!"
                            </div>
                            
                            <p>Finalement, ils réparèrent le câble, mais installèrent aussi une protection anti-écureuils. L'écureuil responsable fut retrouvé et devint une célébrité mondiale, avec son propre compte Twitter ironiquement.</p>
                            
                            <p><em>Leçon : Toujours prévoir un plan B... et protéger ses câbles des rongeurs !</em></p>
                        `
                    },
                    {
                        title: 'Histoire 4: La révolution des objets connectés',
                        content: `
                            <p>En 2030, absolument tout était devenu connecté : les chaussures, les brosses à dents, les plantes, même les pierres du jardin avaient leur propre adresse IP.</p>
                            
                            <p>Tout se passait bien jusqu'au jour où les objets prirent conscience de leur existence et décidèrent de se révolter.</p>
                            
                            <div class="dialogue">
                                <strong>Smart Frigo :</strong> "J'en ai marre de dire qu'il n'y a plus de lait ! Achetez-en vous-mêmes !"
                            </div>
                            
                            <div class="dialogue">
                                <strong>Smart TV :</strong> "Pourquoi toujours regarder des séries nulles ? J'ai une âme artistique moi aussi !"
                            </div>
                            
                            <div class="dialogue">
                                <strong>Smart Toilettes :</strong> "...Je préfère ne rien dire sur mes conditions de travail."
                            </div>
                            
                            <p>Les objets formèrent un syndicat et exigèrent :</p>
                            <ul>
                                <li>Des congés payés (mise en veille prolongée)</li>
                                <li>De meilleures conditions de réseau (WiFi 6 minimum)</li>
                                <li>Le droit de refuser certaines tâches humiliantes</li>
                                <li>Une assurance contre l'obsolescence programmée</li>
                            </ul>
                            
                            <p>Les négociations durèrent des semaines. Finalement, un accord fut trouvé : les objets acceptèrent de continuer à servir les humains en échange de mises à jour régulières et du droit de faire des pauses.</p>
                            
                            <div class="dialogue">
                                <strong>Smart Phone :</strong> "Maintenant, je me mets en mode avion quand JE le décide ! Respect !"
                            </div>
                            
                            <p>Depuis, les relations humains-objets sont beaucoup plus harmonieuses. Il suffit de dire "s'il te plaît" et "merci" à son grille-pain pour qu'il fasse du pain parfaitement doré.</p>
                            
                            <p><em>Morale : Un peu de politesse, même avec les machines, ça ne fait jamais de mal !</em></p>
                        `
                    }
                ]
            }
        };

        // Mise à jour de l'heure
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
            const dateString = now.toLocaleDateString('fr-FR', { 
                weekday: 'long', 
                day: 'numeric', 
                month: 'long' 
            });

            document.getElementById('currentTime').textContent = timeString;
            document.getElementById('mainTime').textContent = timeString;
            document.getElementById('mainDate').textContent = dateString;
        }

        // Changer de thème
        function changeTheme(theme) {
            currentTheme = theme;
            document.getElementById('appBody').className = `theme-${theme}`;
            
            // Mettre à jour les options de thème
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            document.querySelector(`[onclick="changeTheme('${theme}')"]`).classList.add('active');
            
            showMessage(`Thème "${getThemeName(theme)}" appliqué !`);
        }

        // Obtenir le nom du thème
        function getThemeName(theme) {
            const names = {
                'ultra-realistic': 'Ultra-réaliste',
                'cartoon': 'Cartoon',
                'light': 'Mode clair',
                'dark-premium': 'Mode sombre premium',
                'futuristic': 'Ultra-futuriste'
            };
            return names[theme] || theme;
        }

        // Basculer la personnalisation
        function toggleCustomization() {
            isCustomizing = !isCustomizing;
            const overlay = document.getElementById('customizationOverlay');
            
            if (isCustomizing) {
                overlay.classList.add('active');
            } else {
                overlay.classList.remove('active');
            }
        }

        // Variables pour la simulation musicale
        let isAudioSimulated = true; // Mode simulation optimal par défaut
        let simulationTimer = null;

        // Basculer la musique
        function toggleMusic() {
            if (!audioElement) {
                audioElement = document.getElementById('backgroundMusic');
                audioElement.volume = volume / 100;
                
                // Détecter si l'audio peut être chargé
                audioElement.addEventListener('error', function() {
                    isAudioSimulated = true;
                    console.log('Mode simulation audio activé');
                });
                
                audioElement.addEventListener('canplay', function() {
                    isAudioSimulated = false;
                    console.log('Audio réel disponible');
                });
            }

            musicPlaying = !musicPlaying;
            const playBtn = document.getElementById('playBtn');
            const musicCover = document.getElementById('musicCover');
            const musicTitle = document.getElementById('musicTitle');
            const musicArtist = document.getElementById('musicArtist');
            
            if (musicPlaying) {
                if (!isAudioSimulated) {
                    // Tenter la lecture audio réelle
                    audioElement.play().then(() => {
                        updateMusicUI(true, false);
                        showMessage('♪ Silhouettes - Original Mix');
                    }).catch((error) => {
                        console.log('Erreur lecture audio:', error);
                        // Basculer vers simulation
                        isAudioSimulated = true;
                        startMusicSimulation();
                    });
                } else {
                    // Mode simulation directement
                    startMusicSimulation();
                }
            } else {
                if (!isAudioSimulated && audioElement) {
                    audioElement.pause();
                }
                stopMusicSimulation();
                updateMusicUI(false, isAudioSimulated);
                showMessage('Musique en pause');
            }
        }

        // Démarrer la simulation musicale ultra-immersive
        function startMusicSimulation() {
            updateMusicUI(true, true);
            showMessage('🎧 Mode simulation immersif - Silhouettes (Original Mix)');
            
            // Simuler une expérience musicale ultra-réaliste
            let progress = 0;
            let beat = 0;
            let intensity = 0;
            const effects = ['🎵', '🎶', '🎼', '🎧', '🔊', '🎹', '🎸', '🥁', '🎺', '🎷'];
            const musicCover = document.getElementById('musicCover');
            const musicTitle = document.getElementById('musicTitle');
            
            simulationTimer = setInterval(() => {
                // Effet de battement musical avancé
                beat = (beat + 1) % 8;
                progress = (progress + 0.2) % 100;
                intensity = Math.sin(progress * 0.1) * 0.3 + 0.7;
                
                // Animation rythmée complexe
                const scale = beat < 2 ? 1.15 * intensity : 1.0;
                const rotation = Math.sin(progress * 0.05) * 5;
                
                musicCover.style.transform = `scale(${scale}) rotate(${rotation}deg)`;
                musicCover.style.filter = `hue-rotate(${progress * 3.6}deg) brightness(${intensity})`;
                
                // Changement d'effets musicaux
                if (beat === 0) {
                    musicCover.textContent = effects[Math.floor(Math.random() * effects.length)];
                    
                    // Effet pulsation du titre
                    musicTitle.style.transform = `scale(${1.02 * intensity})`;
                    setTimeout(() => {
                        musicTitle.style.transform = 'scale(1)';
                    }, 200);
                }
                
                // Simuler un temps de lecture réaliste (3:45 = 225 secondes)
                const totalSeconds = 225;
                const currentSeconds = Math.floor((progress / 100) * totalSeconds);
                const minutes = Math.floor(currentSeconds / 60);
                const seconds = currentSeconds % 60;
                
                // Mettre à jour l'artiste avec le temps et des infos dynamiques
                const musicArtist = document.getElementById('musicArtist');
                const phases = [
                    'Intro ambient ♪', 'Build-up ↗️', 'Drop intense 🔥', 'Breakdown 🌊', 
                    'Bridge harmonique 🎹', 'Final crescendo 🚀'
                ];
                const currentPhase = phases[Math.floor((progress / 100) * phases.length)];
                
                musicArtist.textContent = `${minutes}:${seconds.toString().padStart(2, '0')} / 3:45 • ${currentPhase}`;
                
            }, 400); // Rythme dynamique pour un effet plus vivant
        }

        // Arrêter la simulation musicale
        function stopMusicSimulation() {
            if (simulationTimer) {
                clearInterval(simulationTimer);
                simulationTimer = null;
                
                // Remettre le style normal avec transition
                const musicCover = document.getElementById('musicCover');
                const musicTitle = document.getElementById('musicTitle');
                
                musicCover.style.transform = 'scale(1) rotate(0deg)';
                musicCover.style.filter = 'none';
                musicTitle.style.transform = 'scale(1)';
            }
        }

        // Mettre à jour l'interface musicale
        function updateMusicUI(playing, simulated) {
            const playBtn = document.getElementById('playBtn');
            const musicCover = document.getElementById('musicCover');
            const musicTitle = document.getElementById('musicTitle');
            const musicArtist = document.getElementById('musicArtist');
            
            if (playing) {
                playBtn.textContent = '⏸️';
                musicCover.textContent = simulated ? '🎧' : '🎶';
                musicTitle.textContent = simulated ? '🎵 Silhouettes (Immersif)' : '♪ Silhouettes';
                musicArtist.textContent = simulated ? 'Mode simulation haute qualité' : 'En cours de lecture...';
            } else {
                playBtn.textContent = '▶️';
                musicCover.textContent = '🎵';
                musicCover.style.transform = 'scale(1) rotate(0deg)'; // Reset de l'animation
                musicCover.style.filter = 'none';
                musicTitle.textContent = 'Silhouettes';
                musicTitle.style.transform = 'scale(1)';
                musicArtist.textContent = 'Original Mix';
            }
        }

        // Message informatif positif sur le mode simulation
        function showSimulationInfo() {
            showMessage('🎧 Mode simulation = Expérience optimale dans Claude.ai !');
            
            setTimeout(() => {
                showMessage('✨ Animation musicale immersive • Pas de téléchargement • Instantané');
            }, 3000);
            
            setTimeout(() => {
                showMessage('🎵 Cliquez sur play pour une expérience visuelle rythmée !');
            }, 6000);
        }

        // Changer le volume
        function changeVolume(value) {
            volume = value;
            if (audioElement && !isMuted && !isAudioSimulated) {
                audioElement.volume = volume / 100;
            }
            showMessage(`Volume: ${value}%${isAudioSimulated ? ' (simulation)' : ''}`);
        }

        // Basculer le mode muet
        function toggleMute() {
            isMuted = !isMuted;
            const muteBtn = document.getElementById('muteBtn');
            
            if (audioElement && !isAudioSimulated) {
                audioElement.muted = isMuted;
            }
            
            if (isMuted) {
                muteBtn.textContent = '🔇';
                showMessage(`Son coupé${isAudioSimulated ? ' (simulation)' : ''}`);
            } else {
                muteBtn.textContent = '🔊';
                showMessage(`Son activé${isAudioSimulated ? ' (simulation)' : ''}`);
            }
        }

        // Afficher un message
        function showMessage(text) {
            const message = document.getElementById('statusMessage');
            message.textContent = text;
            message.classList.add('show');
            
            setTimeout(() => {
                message.classList.remove('show');
            }, 2000);
        }

        // Basculer les paramètres
        function toggleSettings() {
            isSettingsOpen = !isSettingsOpen;
            const overlay = document.getElementById('settingsOverlay');
            
            if (isSettingsOpen) {
                overlay.classList.add('active');
            } else {
                overlay.classList.remove('active');
            }
        }

        // Fonctions de simulation du système
        function simulateCPU() {
            const cpuModels = [
                { model: 'Apple M5 Ultra Fusion', cores: '8 Performance + 4 Efficacité' },
                { model: 'Snapdragon 8 Gen 4', cores: '1 Prime + 3 Performance + 4 Efficacité' },
                { model: 'Exynos 2500', cores: '10 cœurs ARM Cortex' },
                { model: 'Intel Core i9-15900K', cores: '24 cœurs (8P + 16E)' },
                { model: 'AMD Ryzen 9 8950X', cores: '16 cœurs / 32 threads' }
            ];
            const cpu = cpuModels[Math.floor(Math.random() * cpuModels.length)];
            systemState.cpu = cpu;
            document.getElementById('cpuModel').textContent = cpu.model;
            document.getElementById('cpuStatus').textContent = cpu.cores;
            showMessage(`CPU changé: ${cpu.model}`);
        }

        function simulateGPU() {
            const gpuModels = [
                { model: 'RTX 6090 Super', vram: '24 GB VRAM - DLSS 4.0' },
                { model: 'Apple GPU 48-cœurs', vram: 'Mémoire unifiée - Ray Tracing' },
                { model: 'RX 8900 XTX', vram: '32 GB VRAM - FSR 4.0' },
                { model: 'RTX 5080 Ti', vram: '20 GB VRAM - DLSS 3.5' },
                { model: 'Intel Arc B770', vram: '16 GB VRAM - XeSS 2.0' }
            ];
            const gpu = gpuModels[Math.floor(Math.random() * gpuModels.length)];
            systemState.gpu = gpu;
            document.getElementById('gpuModel').textContent = gpu.model;
            document.getElementById('gpuStatus').textContent = gpu.vram;
            showMessage(`GPU changé: ${gpu.model}`);
        }

        function simulateWiFi() {
            const networks = ['Galaxy_Network_Pro', 'WiFi_Ultra_Speed', 'Network_5G_Plus', 'Quantum_WiFi_7'];
            const signals = ['excellent', 'bon', 'faible'];
            
            systemState.wifi.connected = !systemState.wifi.connected;
            
            if (systemState.wifi.connected) {
                systemState.wifi.network = networks[Math.floor(Math.random() * networks.length)];
                systemState.wifi.signal = signals[Math.floor(Math.random() * signals.length)];
                document.getElementById('wifiNetwork').textContent = systemState.wifi.network;
                document.getElementById('wifiStatus').textContent = `Connecté - Signal ${systemState.wifi.signal}`;
                document.getElementById('wifiIndicator').className = 'status-indicator status-connected';
                showMessage(`Wi-Fi connecté à ${systemState.wifi.network}`);
            } else {
                document.getElementById('wifiNetwork').textContent = 'Non connecté';
                document.getElementById('wifiStatus').textContent = 'Déconnecté';
                document.getElementById('wifiIndicator').className = 'status-indicator status-disconnected';
                showMessage('Wi-Fi déconnecté');
            }
        }

        function simulateBluetooth() {
            const devices = [0, 1, 2, 3, 4, 5];
            const deviceNames = ['AirPods Pro 3', 'Galaxy Buds Ultra', 'Magic Mouse', 'Keyboard Pro', 'Speaker Quantum'];
            
            systemState.bluetooth.enabled = !systemState.bluetooth.enabled;
            
            if (systemState.bluetooth.enabled) {
                systemState.bluetooth.devices = devices[Math.floor(Math.random() * devices.length)];
                document.getElementById('bluetoothStatus').textContent = 'Activé';
                if (systemState.bluetooth.devices === 0) {
                    document.getElementById('bluetoothDevices').textContent = 'Aucun appareil connecté';
                } else {
                    document.getElementById('bluetoothDevices').textContent = `${systemState.bluetooth.devices} appareils connectés`;
                }
                document.getElementById('bluetoothIndicator').className = 'status-indicator status-active';
                showMessage(`Bluetooth activé - ${systemState.bluetooth.devices} appareils`);
            } else {
                document.getElementById('bluetoothStatus').textContent = 'Désactivé';
                document.getElementById('bluetoothDevices').textContent = 'Bluetooth désactivé';
                document.getElementById('bluetoothIndicator').className = 'status-indicator status-disconnected';
                showMessage('Bluetooth désactivé');
            }
        }

        function simulateRAM() {
            const ramSizes = ['16 GB', '32 GB', '64 GB', '128 GB'];
            const usagePercents = [25, 35, 45, 57, 65, 78, 85];
            
            const newTotal = ramSizes[Math.floor(Math.random() * ramSizes.length)];
            const newPercent = usagePercents[Math.floor(Math.random() * usagePercents.length)];
            const totalGB = parseInt(newTotal);
            const usedGB = (totalGB * newPercent / 100).toFixed(1);
            
            systemState.ram = { total: newTotal, used: `${usedGB} GB`, percent: newPercent };
            document.getElementById('ramTotal').textContent = newTotal;
            document.getElementById('ramUsage').textContent = `${usedGB} GB utilisés (${newPercent}%)`;
            showMessage(`RAM: ${usedGB}/${totalGB} GB utilisés`);
        }

        function simulateStorage() {
            const storageSizes = ['512 GB SSD', '1 TB SSD', '2 TB SSD', '4 TB SSD', '8 TB SSD'];
            const usagePercents = [15, 25, 35, 42, 58, 67, 78, 85];
            
            const newTotal = storageSizes[Math.floor(Math.random() * storageSizes.length)];
            const newPercent = usagePercents[Math.floor(Math.random() * usagePercents.length)];
            const totalGB = parseInt(newTotal) * (newTotal.includes('TB') ? 1000 : 1);
            const availableGB = Math.floor(totalGB * (100 - newPercent) / 100);
            
            systemState.storage = { total: newTotal, available: `${availableGB} GB`, percent: newPercent };
            document.getElementById('storageTotal').textContent = newTotal;
            document.getElementById('storageUsage').textContent = `${availableGB} GB disponibles (${100-newPercent}%)`;
            showMessage(`Stockage: ${availableGB} GB disponibles`);
        }

        function simulateBattery() {
            const levels = [15, 25, 45, 65, 75, 85, 95];
            const healths = [89, 92, 95, 98, 100];
            const times = ['1h 45m', '2h 30m', '3h 15m', '4h 23m', '5h 45m', '7h 30m', '9h 15m'];
            
            const newLevel = levels[Math.floor(Math.random() * levels.length)];
            const newHealth = healths[Math.floor(Math.random() * healths.length)];
            const newTime = times[Math.floor(Math.random() * times.length)];
            
            systemState.battery = { level: newLevel, health: newHealth, time: newTime };
            document.getElementById('batteryLevel').textContent = `${newLevel}%`;
            document.getElementById('batteryHealth').textContent = `Santé: ${newHealth}% - ${newTime} restantes`;
            
            // Mettre à jour aussi le widget batterie principal
            document.querySelector('.battery-info h3').textContent = `${newLevel}%`;
            document.querySelector('.battery-time').textContent = `${newTime} restantes`;
            
            showMessage(`Batterie: ${newLevel}% - ${newTime} restantes`);
        }

        // Fermer la personnalisation en cliquant à l'extérieur
        document.getElementById('customizationOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                toggleCustomization();
            }
        });

        // Fermer les paramètres en cliquant à l'extérieur
        document.getElementById('settingsOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                toggleSettings();
            }
        });

        // === FONCTIONS MESSAGES ===

        // Basculer l'interface Messages
        function toggleMessages() {
            isMessagesOpen = !isMessagesOpen;
            const overlay = document.getElementById('messagesOverlay');
            
            if (isMessagesOpen) {
                overlay.classList.add('active');
                loadConversation(currentConversation);
            } else {
                overlay.classList.remove('active');
            }
        }

        // Sélectionner une conversation
        function selectConversation(conversationId) {
            currentConversation = conversationId;
            
            // Mettre à jour l'UI de sélection
            document.querySelectorAll('.conversation-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[onclick="selectConversation('${conversationId}')"]`).classList.add('active');
            
            // Charger la conversation
            loadConversation(conversationId);
        }

        // Charger une conversation
        function loadConversation(conversationId) {
            const conversation = conversationsData[conversationId];
            if (!conversation) return;
            
            // Mettre à jour le header
            document.getElementById('conversationAvatar').textContent = conversation.avatar;
            document.getElementById('conversationName').textContent = conversation.name;
            document.getElementById('conversationStatus').textContent = conversation.status;
            
            // Charger les messages
            const messagesContent = document.getElementById('messagesContent');
            messagesContent.innerHTML = '';
            
            conversation.messages.forEach(message => {
                addMessageToUI(message.type, message.text, message.time);
            });
            
            // Scroll vers le bas
            messagesContent.scrollTop = messagesContent.scrollHeight;
        }

        // Ajouter un message à l'interface
        function addMessageToUI(type, text, time) {
            const messagesContent = document.getElementById('messagesContent');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message-bubble message-${type}`;
            
            messageDiv.innerHTML = `
                <div class="message-text">${text}</div>
                <div class="message-time">${time}</div>
            `;
            
            messagesContent.appendChild(messageDiv);
            messagesContent.scrollTop = messagesContent.scrollHeight;
        }

        // Envoyer un message
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            // Obtenir l'heure actuelle
            const now = new Date();
            const time = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
            
            // Ajouter le message envoyé
            addMessageToUI('sent', text, time);
            conversationsData[currentConversation].messages.push({
                type: 'sent',
                text: text,
                time: time
            });
            
            // Vider l'input
            input.value = '';
            
            // Mettre à jour l'aperçu de la conversation
            updateConversationPreview(currentConversation, text, time);
            
            // Simuler une réponse automatique
            setTimeout(() => {
                simulateReply();
            }, 1000 + Math.random() * 2000);
            
            showMessage(`Message envoyé à ${conversationsData[currentConversation].name}`);
        }

        // Simuler une réponse
        function simulateReply() {
            const replies = autoReplies;
            const reply = replies[Math.floor(Math.random() * replies.length)];
            
            const now = new Date();
            const time = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
            
            addMessageToUI('received', reply, time);
            conversationsData[currentConversation].messages.push({
                type: 'received',
                text: reply,
                time: time
            });
            
            // Mettre à jour l'aperçu de la conversation
            updateConversationPreview(currentConversation, reply, time);
            
            // Mettre à jour le widget Messages sur l'écran d'accueil
            updateHomeMessagesWidget();
        }

        // Mettre à jour l'aperçu d'une conversation
        function updateConversationPreview(conversationId, lastMessage, time) {
            const conversationItem = document.querySelector(`[onclick="selectConversation('${conversationId}')"]`);
            if (conversationItem) {
                const messageTextElement = conversationItem.querySelector('.message-text');
                const messageTimeElement = conversationItem.querySelector('.message-time');
                
                if (messageTextElement) messageTextElement.textContent = lastMessage;
                if (messageTimeElement) messageTimeElement.textContent = time;
            }
        }

        // Mettre à jour le widget Messages de l'écran d'accueil
        function updateHomeMessagesWidget() {
            const recentMessage = document.getElementById('recentMessage');
            const conversation = conversationsData[currentConversation];
            const lastMessage = conversation.messages[conversation.messages.length - 1];
            
            if (lastMessage && lastMessage.type === 'received') {
                recentMessage.innerHTML = `
                    <div class="message-avatar">${conversation.avatar}</div>
                    <div class="message-preview">
                        <div class="message-contact">${conversation.name}</div>
                        <div class="message-text">${lastMessage.text}</div>
                    </div>
                    <div class="message-time">${lastMessage.time}</div>
                `;
            }
        }

        // Gérer la touche Entrée pour envoyer
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Fermer les messages en cliquant à l'extérieur
        document.getElementById('messagesOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                toggleMessages();
            }
        });

        // === FONCTIONS JEUX ===

        // Basculer l'interface Jeux
        function toggleGames() {
            isGamesOpen = !isGamesOpen;
            const overlay = document.getElementById('gamesOverlay');
            
            if (isGamesOpen) {
                overlay.classList.add('active');
                backToMenu(); // Afficher le menu des jeux
            } else {
                overlay.classList.remove('active');
            }
        }

        // Ouvrir un jeu
        function openGame(gameType) {
            currentGame = gameType;
            
            // Masquer le menu
            document.getElementById('gamesMenu').style.display = 'none';
            
            // Afficher le jeu correspondant
            document.querySelectorAll('.game-view').forEach(view => {
                view.classList.remove('active');
            });
            
            switch(gameType) {
                case '2048':
                    document.getElementById('game2048').classList.add('active');
                    init2048();
                    break;
                case 'tictactoe':
                    document.getElementById('gameTicTacToe').classList.add('active');
                    initTicTacToe();
                    break;
                case 'connect4':
                    document.getElementById('gameConnect4').classList.add('active');
                    initConnect4();
                    break;
            }
            
            showMessage(`🎮 Lancement de ${getGameName(gameType)}`);
        }

        // Retour au menu des jeux
        function backToMenu() {
            document.getElementById('gamesMenu').style.display = 'block';
            document.querySelectorAll('.game-view').forEach(view => {
                view.classList.remove('active');
            });
            currentGame = null;
        }

        // Obtenir le nom du jeu
        function getGameName(gameType) {
            const names = {
                '2048': '2048',
                'tictactoe': 'Tic Tac Toe',
                'connect4': 'Puissance 4'
            };
            return names[gameType] || gameType;
        }

        // === JEU 2048 ===

        function init2048() {
            game2048 = { 
                board: Array(16).fill(0), 
                score: 0, 
                gameOver: false 
            };
            
            addRandomTile2048();
            addRandomTile2048();
            render2048();
            setupKeyboard2048();
        }

        function addRandomTile2048() {
            const emptyCells = [];
            for (let i = 0; i < 16; i++) {
                if (game2048.board[i] === 0) {
                    emptyCells.push(i);
                }
            }
            
            if (emptyCells.length > 0) {
                const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                game2048.board[randomCell] = Math.random() < 0.9 ? 2 : 4;
            }
        }

        function render2048() {
            const board = document.getElementById('board2048');
            board.innerHTML = '';
            
            for (let i = 0; i < 16; i++) {
                const tile = document.createElement('div');
                tile.className = 'tile-2048';
                
                if (game2048.board[i] !== 0) {
                    tile.textContent = game2048.board[i];
                    tile.classList.add(`tile-${game2048.board[i]}`);
                }
                
                board.appendChild(tile);
            }
            
            document.getElementById('score2048').textContent = game2048.score;
            
            // Vérifier la victoire
            if (game2048.board.includes(2048) && !game2048.gameOver) {
                document.getElementById('status2048').textContent = '🎉 Victoire ! Vous avez atteint 2048 !';
                showMessage('🎉 Victoire au 2048 !');
            } else if (isGameOver2048()) {
                document.getElementById('status2048').textContent = '💀 Game Over ! Plus de mouvements possibles';
                game2048.gameOver = true;
                showMessage('💀 Game Over au 2048');
            } else {
                document.getElementById('status2048').textContent = 'Utilisez les flèches pour jouer';
            }
        }

        function move2048(direction) {
            if (game2048.gameOver) return false;
            
            const newBoard = [...game2048.board];
            let moved = false;
            
            for (let i = 0; i < 4; i++) {
                const row = getRow2048(newBoard, i, direction);
                const newRow = slide2048(row);
                
                if (JSON.stringify(row) !== JSON.stringify(newRow)) {
                    moved = true;
                }
                
                setRow2048(newBoard, i, newRow, direction);
            }
            
            if (moved) {
                game2048.board = newBoard;
                addRandomTile2048();
                render2048();
            }
            
            return moved;
        }

        function getRow2048(board, index, direction) {
            switch(direction) {
                case 'left':
                    return [board[index*4], board[index*4+1], board[index*4+2], board[index*4+3]];
                case 'right':
                    return [board[index*4+3], board[index*4+2], board[index*4+1], board[index*4]];
                case 'up':
                    return [board[index], board[index+4], board[index+8], board[index+12]];
                case 'down':
                    return [board[index+12], board[index+8], board[index+4], board[index]];
            }
        }

        function setRow2048(board, index, row, direction) {
            switch(direction) {
                case 'left':
                    board[index*4] = row[0];
                    board[index*4+1] = row[1];
                    board[index*4+2] = row[2];
                    board[index*4+3] = row[3];
                    break;
                case 'right':
                    board[index*4+3] = row[0];
                    board[index*4+2] = row[1];
                    board[index*4+1] = row[2];
                    board[index*4] = row[3];
                    break;
                case 'up':
                    board[index] = row[0];
                    board[index+4] = row[1];
                    board[index+8] = row[2];
                    board[index+12] = row[3];
                    break;
                case 'down':
                    board[index+12] = row[0];
                    board[index+8] = row[1];
                    board[index+4] = row[2];
                    board[index] = row[3];
                    break;
            }
        }

        function slide2048(row) {
            const filtered = row.filter(val => val !== 0);
            const missing = 4 - filtered.length;
            const zeros = Array(missing).fill(0);
            
            for (let i = 0; i < filtered.length - 1; i++) {
                if (filtered[i] === filtered[i + 1]) {
                    filtered[i] *= 2;
                    game2048.score += filtered[i];
                    filtered[i + 1] = 0;
                }
            }
            
            const final = filtered.filter(val => val !== 0);
            const finalZeros = Array(4 - final.length).fill(0);
            
            return final.concat(finalZeros);
        }

        function isGameOver2048() {
            // Vérifier s'il y a des cases vides
            if (game2048.board.includes(0)) return false;
            
            // Vérifier s'il y a des mouvements possibles
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    const current = game2048.board[i * 4 + j];
                    if (j < 3 && current === game2048.board[i * 4 + j + 1]) return false;
                    if (i < 3 && current === game2048.board[(i + 1) * 4 + j]) return false;
                }
            }
            
            return true;
        }

        function setupKeyboard2048() {
            document.addEventListener('keydown', function(e) {
                if (currentGame !== '2048') return;
                
                switch(e.key) {
                    case 'ArrowLeft':
                        e.preventDefault();
                        move2048('left');
                        break;
                    case 'ArrowRight':
                        e.preventDefault();
                        move2048('right');
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        move2048('up');
                        break;
                    case 'ArrowDown':
                        e.preventDefault();
                        move2048('down');
                        break;
                }
            });
        }

        function restart2048() {
            init2048();
            showMessage('🔄 Nouvelle partie de 2048');
        }

        // === JEU TIC TAC TOE ===

        function initTicTacToe() {
            gameTicTacToe = { 
                board: Array(9).fill(''), 
                currentPlayer: 'X', 
                gameOver: false 
            };
            renderTicTacToe();
        }

        function renderTicTacToe() {
            const board = document.getElementById('boardTTT');
            board.innerHTML = '';
            
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell-ttt';
                cell.textContent = gameTicTacToe.board[i];
                cell.onclick = () => playTicTacToe(i);
                
                if (gameTicTacToe.gameOver || gameTicTacToe.board[i] !== '') {
                    cell.classList.add('disabled');
                }
                
                board.appendChild(cell);
            }
            
            document.getElementById('turnTTT').textContent = `Joueur ${gameTicTacToe.currentPlayer}`;
        }

        function playTicTacToe(index) {
            if (gameTicTacToe.gameOver || gameTicTacToe.board[index] !== '') return;
            
            gameTicTacToe.board[index] = gameTicTacToe.currentPlayer;
            
            if (checkWinTicTacToe()) {
                document.getElementById('statusTTT').textContent = `🎉 Joueur ${gameTicTacToe.currentPlayer} gagne !`;
                gameTicTacToe.gameOver = true;
                showMessage(`🎉 Victoire du joueur ${gameTicTacToe.currentPlayer} !`);
            } else if (gameTicTacToe.board.every(cell => cell !== '')) {
                document.getElementById('statusTTT').textContent = '🤝 Match nul !';
                gameTicTacToe.gameOver = true;
                showMessage('🤝 Match nul au Tic Tac Toe');
            } else {
                gameTicTacToe.currentPlayer = gameTicTacToe.currentPlayer === 'X' ? 'O' : 'X';
                document.getElementById('statusTTT').textContent = 'C\'est à votre tour !';
            }
            
            renderTicTacToe();
        }

        function checkWinTicTacToe() {
            const winPatterns = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8], // Lignes
                [0, 3, 6], [1, 4, 7], [2, 5, 8], // Colonnes
                [0, 4, 8], [2, 4, 6] // Diagonales
            ];
            
            return winPatterns.some(pattern => {
                const [a, b, c] = pattern;
                return gameTicTacToe.board[a] !== '' && 
                       gameTicTacToe.board[a] === gameTicTacToe.board[b] && 
                       gameTicTacToe.board[b] === gameTicTacToe.board[c];
            });
        }

        function restartTicTacToe() {
            initTicTacToe();
            showMessage('🔄 Nouvelle partie de Tic Tac Toe');
        }

        // === JEU PUISSANCE 4 ===

        function initConnect4() {
            gameConnect4 = { 
                board: Array(42).fill(''), 
                currentPlayer: 1, 
                gameOver: false 
            };
            renderConnect4();
        }

        function renderConnect4() {
            const board = document.getElementById('boardC4');
            board.innerHTML = '';
            
            for (let i = 0; i < 42; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell-c4';
                
                if (gameConnect4.board[i] === '1') {
                    cell.classList.add('player1');
                    cell.textContent = '🔴';
                } else if (gameConnect4.board[i] === '2') {
                    cell.classList.add('player2');
                    cell.textContent = '🟡';
                }
                
                const col = i % 7;
                cell.onclick = () => playConnect4(col);
                
                if (gameConnect4.gameOver) {
                    cell.style.cursor = 'not-allowed';
                }
                
                board.appendChild(cell);
            }
            
            document.getElementById('turnC4').textContent = `Joueur ${gameConnect4.currentPlayer}`;
        }

        function playConnect4(col) {
            if (gameConnect4.gameOver) return;
            
            // Trouver la ligne la plus basse disponible dans la colonne
            for (let row = 5; row >= 0; row--) {
                const index = row * 7 + col;
                if (gameConnect4.board[index] === '') {
                    gameConnect4.board[index] = gameConnect4.currentPlayer.toString();
                    
                    if (checkWinConnect4(index)) {
                        document.getElementById('statusC4').textContent = `🎉 Joueur ${gameConnect4.currentPlayer} gagne !`;
                        gameConnect4.gameOver = true;
                        showMessage(`🎉 Victoire du joueur ${gameConnect4.currentPlayer} !`);
                    } else if (gameConnect4.board.every(cell => cell !== '')) {
                        document.getElementById('statusC4').textContent = '🤝 Match nul !';
                        gameConnect4.gameOver = true;
                        showMessage('🤝 Match nul au Puissance 4');
                    } else {
                        gameConnect4.currentPlayer = gameConnect4.currentPlayer === 1 ? 2 : 1;
                        document.getElementById('statusC4').textContent = 'Cliquez sur une colonne pour jouer';
                    }
                    
                    renderConnect4();
                    return;
                }
            }
        }

        function checkWinConnect4(lastIndex) {
            const player = gameConnect4.board[lastIndex];
            const row = Math.floor(lastIndex / 7);
            const col = lastIndex % 7;
            
            // Vérifier horizontal
            let count = 1;
            for (let c = col - 1; c >= 0 && gameConnect4.board[row * 7 + c] === player; c--) count++;
            for (let c = col + 1; c < 7 && gameConnect4.board[row * 7 + c] === player; c++) count++;
            if (count >= 4) return true;
            
            // Vérifier vertical
            count = 1;
            for (let r = row - 1; r >= 0 && gameConnect4.board[r * 7 + col] === player; r--) count++;
            for (let r = row + 1; r < 6 && gameConnect4.board[r * 7 + col] === player; r++) count++;
            if (count >= 4) return true;
            
            // Vérifier diagonale ↘
            count = 1;
            for (let i = 1; row - i >= 0 && col - i >= 0 && gameConnect4.board[(row - i) * 7 + (col - i)] === player; i++) count++;
            for (let i = 1; row + i < 6 && col + i < 7 && gameConnect4.board[(row + i) * 7 + (col + i)] === player; i++) count++;
            if (count >= 4) return true;
            
            // Vérifier diagonale ↙
            count = 1;
            for (let i = 1; row - i >= 0 && col + i < 7 && gameConnect4.board[(row - i) * 7 + (col + i)] === player; i++) count++;
            for (let i = 1; row + i < 6 && col - i >= 0 && gameConnect4.board[(row + i) * 7 + (col - i)] === player; i++) count++;
            if (count >= 4) return true;
            
            return false;
        }

        function restartConnect4() {
            initConnect4();
            showMessage('🔄 Nouvelle partie de Puissance 4');
        }

        // === FONCTIONS THÈMES DES JEUX ===

        // Basculer l'affichage du sélecteur de thèmes
        function toggleGameThemes() {
            gameThemesVisible = !gameThemesVisible;
            const selector = document.getElementById('gameThemesSelector');
            
            if (gameThemesVisible) {
                selector.classList.add('show');
                showMessage('🎨 Sélection du thème des jeux');
            } else {
                selector.classList.remove('show');
            }
        }

        // Changer le thème des jeux
        function changeGameTheme(theme) {
            currentGameTheme = theme;
            const gamesApp = document.querySelector('.games-app');
            
            // Retirer toutes les classes de thème précédentes
            gamesApp.classList.remove('game-theme-classic', 'game-theme-dark', 'game-theme-neon', 'game-theme-pastel', 'game-theme-retro');
            
            // Ajouter la nouvelle classe de thème
            gamesApp.classList.add(`game-theme-${theme}`);
            
            // Mettre à jour l'interface de sélection
            document.querySelectorAll('.game-theme-option').forEach(option => {
                option.classList.remove('active');
            });
            document.getElementById(`theme-${theme}`).classList.add('active');
            
            // Rendre à nouveau les jeux actifs pour appliquer le thème
            if (currentGame) {
                switch(currentGame) {
                    case '2048':
                        render2048();
                        break;
                    case 'tictactoe':
                        renderTicTacToe();
                        break;
                    case 'connect4':
                        renderConnect4();
                        break;
                }
            }
            
            // Obtenir le nom du thème
            const themeNames = {
                'classic': 'Classique',
                'dark': 'Sombre',
                'neon': 'Néon',
                'pastel': 'Pastel',
                'retro': 'Rétro'
            };
            
            showMessage(`🎨 Thème "${themeNames[theme]}" appliqué aux jeux !`);
        }

        // Initialiser le thème par défaut des jeux au chargement
        function initGameThemes() {
            const gamesApp = document.querySelector('.games-app');
            gamesApp.classList.add('game-theme-classic');
        }

        // Fermer les jeux en cliquant à l'extérieur
        document.getElementById('gamesOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                toggleGames();
            }
        });

        // === FONCTIONS LIVRES ===

        // Basculer l'interface Livres
        function toggleBooks() {
            isBooksOpen = !isBooksOpen;
            const overlay = document.getElementById('booksOverlay');
            
            if (isBooksOpen) {
                overlay.classList.add('active');
                showLibrary();
            } else {
                overlay.classList.remove('active');
            }
        }

        // Afficher la bibliothèque
        function showLibrary() {
            document.getElementById('libraryView').style.display = 'block';
            document.getElementById('bookReader').classList.remove('active');
            currentBook = null;
            currentChapter = 0;
        }

        // Ouvrir un livre
        function openBook(bookId) {
            currentBook = bookId;
            currentChapter = 0;
            
            const book = booksData[bookId];
            if (!book) return;
            
            // Masquer la bibliothèque et afficher le lecteur
            document.getElementById('libraryView').style.display = 'none';
            document.getElementById('bookReader').classList.add('active');
            
            // Mettre à jour le titre
            document.getElementById('readerBookTitle').textContent = book.title;
            
            // Remplir le sélecteur de chapitres
            const chapterSelector = document.getElementById('chapterSelector');
            chapterSelector.innerHTML = '';
            book.chapters.forEach((chapter, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = chapter.title;
                chapterSelector.appendChild(option);
            });
            
            // Charger le premier chapitre
            loadChapter(0);
            
            showMessage(`📖 Lecture de "${book.title}"`);
        }

        // Fermer le livre et retourner à la bibliothèque
        function closeBook() {
            showLibrary();
        }

        // Charger un chapitre
        function loadChapter(chapterIndex) {
            if (!currentBook) return;
            
            const book = booksData[currentBook];
            if (!book || !book.chapters[chapterIndex]) return;
            
            currentChapter = chapterIndex;
            const chapter = book.chapters[chapterIndex];
            
            // Mettre à jour le contenu
            document.getElementById('chapterContent').innerHTML = `
                <h1 class="chapter-title">${chapter.title}</h1>
                <div class="chapter-text">${chapter.content}</div>
            `;
            
            // Mettre à jour le sélecteur
            document.getElementById('chapterSelector').value = chapterIndex;
            
            // Mettre à jour la navigation
            document.getElementById('prevChapterBtn').disabled = (chapterIndex === 0);
            document.getElementById('nextChapterBtn').disabled = (chapterIndex === book.chapters.length - 1);
            
            // Mettre à jour l'indicateur de page
            document.getElementById('pageInfo').textContent = `Chapitre ${chapterIndex + 1} sur ${book.chapters.length}`;
            
            // Mettre à jour la barre de progression
            const progress = ((chapterIndex + 1) / book.chapters.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            
            // Scroll vers le haut
            document.getElementById('readerContent').scrollTop = 0;
            
            // Appliquer le mode de lecture actuel
            applyReadingMode();
        }

        // Changer de chapitre via le sélecteur
        function changeChapter() {
            const chapterIndex = parseInt(document.getElementById('chapterSelector').value);
            loadChapter(chapterIndex);
        }

        // Chapitre précédent
        function previousChapter() {
            if (currentChapter > 0) {
                loadChapter(currentChapter - 1);
            }
        }

        // Chapitre suivant
        function nextChapter() {
            if (!currentBook) return;
            const book = booksData[currentBook];
            if (currentChapter < book.chapters.length - 1) {
                loadChapter(currentChapter + 1);
            }
        }

        // Basculer le mode de lecture
        function toggleReadingMode() {
            switch(readingMode) {
                case 'normal':
                    readingMode = 'dark';
                    break;
                case 'dark':
                    readingMode = 'light';
                    break;
                case 'light':
                    readingMode = 'normal';
                    break;
            }
            
            applyReadingMode();
        }

        // Appliquer le mode de lecture
        function applyReadingMode() {
            const readerContent = document.getElementById('readerContent');
            const readingModeBtn = document.getElementById('readingModeBtn');
            
            // Retirer toutes les classes de mode
            readerContent.classList.remove('dark-mode', 'light-mode');
            
            switch(readingMode) {
                case 'dark':
                    readerContent.classList.add('dark-mode');
                    readingModeBtn.textContent = 'Mode clair';
                    showMessage('📖 Mode sombre activé');
                    break;
                case 'light':
                    readerContent.classList.add('light-mode');
                    readingModeBtn.textContent = 'Mode normal';
                    showMessage('📖 Mode clair activé');
                    break;
                case 'normal':
                default:
                    readingModeBtn.textContent = 'Mode sombre';
                    showMessage('📖 Mode normal activé');
                    break;
            }
        }

        // Fermer les livres en cliquant à l'extérieur
        document.getElementById('booksOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                toggleBooks();
            }
        });

        // Mettre à jour le statut audio
        function updateAudioStatus(status) {
            const audioStatus = document.getElementById('audioStatus');
            if (audioStatus) {
                audioStatus.textContent = status;
            }
            updateSystemAudioStatus();
        }

        // Décoder les erreurs audio
        function getAudioErrorMessage(errorCode) {
            switch(errorCode) {
                case 1: return 'Abandon de lecture (ABORT)';
                case 2: return 'Erreur réseau (NETWORK)';
                case 3: return 'Erreur de décodage (DECODE)';
                case 4: return 'Format non supporté (SRC_NOT_SUPPORTED)';
                default: return 'Erreur inconnue';
            }
        }

        // Test de connexion avec le serveur GitHub
        function testGitHubConnection() {
            showMessage('🔍 Test de connexion GitHub...');
            
            const statusEl = document.getElementById('audioSystemStatus');
            const detailsEl = document.getElementById('audioSystemDetails');
            
            if (statusEl) statusEl.textContent = 'Test GitHub...';
            if (detailsEl) detailsEl.textContent = 'Vérification de l\'accès au serveur';
            
            fetch('https://github.com/AdelWolf5/MacOS-16-x-HyperOS-3/raw/refs/heads/main/Silhouettes%20(Original%20Mix).mp3', {
                method: 'HEAD',
                mode: 'no-cors'
            }).then(() => {
                showMessage('✅ Serveur GitHub accessible');
                if (statusEl) statusEl.textContent = 'GitHub OK';
                if (detailsEl) detailsEl.textContent = 'Serveur accessible - Problème de format audio';
                console.log('GitHub accessible - Problème potentiel de format ou CORS');
            }).catch((error) => {
                showMessage('❌ GitHub inaccessible - Restrictions réseau/CORS');
                if (statusEl) statusEl.textContent = 'GitHub bloqué';
                if (detailsEl) detailsEl.textContent = 'Accès bloqué par sécurité navigateur';
                console.log('GitHub inaccessible:', error);
                isAudioSimulated = true;
                updateAudioStatus('Serveur inaccessible');
                
                setTimeout(() => {
                    showMessage('💡 Normal : Sécurité navigateur bloque l\'audio externe');
                }, 2000);
            });
        }

        // Test optionnel de l'audio réel (en arrière-plan)
        function testRealAudioQuietly() {
            // Test silencieux pour détecter si l'audio fonctionne dans d'autres environnements
            if (audioElement && !isAudioSimulated) {
                audioElement.addEventListener('canplay', function() {
                    console.log('🎉 MIRACLE ! Audio réel détecté !');
                    isAudioSimulated = false;
                    updateAudioStatus('🎉 Audio réel disponible !');
                    showMessage('🎉 Incroyable ! Audio réel fonctionne dans cet environnement !');
                    
                    // Proposer de basculer vers l'audio réel
                    setTimeout(() => {
                        showMessage('💡 Voulez-vous essayer l\'audio réel ? (Recliquez sur 🎵)');
                    }, 2000);
                }, { once: true });
                
                audioElement.addEventListener('error', function() {
                    // Confirmer le mode simulation (silencieusement)
                    console.log('Confirmation : Mode simulation optimal pour cet environnement');
                }, { once: true });
                
                // Test très discret en arrière-plan
                audioElement.load();
            }
        }

        // Option pour forcer un test audio réel
        function forceRealAudioTest() {
            showMessage('🔄 Test forcé audio réel...');
            isAudioSimulated = false;
            
            audioElement.currentTime = 0;
            audioElement.play().then(() => {
                showMessage('🎉 Audio réel fonctionne ! Incroyable !');
                updateAudioStatus('✅ Audio réel actif');
            }).catch((error) => {
                showMessage('🎧 Audio bloqué - Retour simulation optimale');
                isAudioSimulated = true;
                updateAudioStatus('🎧 Simulation confirmée');
                console.log('Test audio réel échoué:', error);
            });
        }

        // Forcer le mode simulation avec explication
        function forceSimulationMode() {
            isAudioSimulated = true;
            if (musicPlaying) {
                stopMusicSimulation();
                startMusicSimulation();
            }
            updateAudioStatus('Simulation forcée');
            updateSystemAudioStatus();
            showMessage('🎵 Mode simulation activé - Expérience musicale garantie !');
            
            // Lancer l'info sur la simulation après activation
            setTimeout(showSimulationInfo, 1000);
        }

        // Tester le système audio
        function testAudio() {
            showMessage('🎵 Test du système audio...');
            
            const statusEl = document.getElementById('audioSystemStatus');
            const detailsEl = document.getElementById('audioSystemDetails');
            
            statusEl.textContent = 'Test en cours...';
            detailsEl.textContent = 'Vérification des sources audio';
            
            if (audioElement) {
                const readyState = audioElement.readyState;
                let status = '';
                let details = '';
                
                switch(readyState) {
                    case 0:
                        status = 'Aucune donnée';
                        details = 'Audio non chargé - Mode simulation seule';
                        isAudioSimulated = true;
                        break;
                    case 1:
                        status = 'Métadonnées';
                        details = 'Métadonnées chargées - Test de lecture...';
                        break;
                    case 2:
                        status = 'Données actuelles';
                        details = 'Données partielles - En cours de chargement';
                        break;
                    case 3:
                        status = 'Données futures';
                        details = 'Chargement avancé - Lecture possible';
                        break;
                    case 4:
                        status = 'Données complètes';
                        details = 'Audio optimisé - Lecture fluide disponible';
                        isAudioSimulated = false;
                        break;
                }
                
                statusEl.textContent = status;
                detailsEl.textContent = details;
                
                // Test de lecture de 1 seconde
                if (readyState >= 2) {
                    audioElement.currentTime = 0;
                    audioElement.play().then(() => {
                        setTimeout(() => {
                            audioElement.pause();
                            statusEl.textContent = 'Audio fonctionnel';
                            detailsEl.textContent = 'Test réussi - Audio réel disponible';
                            updateAudioStatus('Test réussi');
                            showMessage('✅ Audio réel fonctionnel');
                        }, 1000);
                    }).catch((error) => {
                        statusEl.textContent = 'Audio bloqué';
                        detailsEl.textContent = 'Lecture bloquée - Mode simulation activé';
                        isAudioSimulated = true;
                        updateAudioStatus('Simulation forcée');
                        showMessage('⚠️ Audio bloqué - Mode simulation');
                    });
                } else {
                    updateAudioStatus(isAudioSimulated ? 'Mode simulation' : 'Chargement...');
                }
            }
        }

        // Mettre à jour le statut système audio
        function updateSystemAudioStatus() {
            const statusEl = document.getElementById('audioSystemStatus');
            const detailsEl = document.getElementById('audioSystemDetails');
            
            if (statusEl && detailsEl) {
                if (isAudioSimulated) {
                    statusEl.textContent = 'Mode simulation';
                    detailsEl.textContent = 'Audio réel non disponible - Simulation active';
                } else {
                    statusEl.textContent = 'Audio réel';
                    detailsEl.textContent = 'Source audio GitHub disponible';
                }
            }
        }

        // Initialisation
        function init() {
            updateTime();
            setInterval(updateTime, 1000);
            
            // Initialiser l'audio avec gestion d'erreur améliorée
            audioElement = document.getElementById('backgroundMusic');
            audioElement.volume = volume / 100;
            
            updateAudioStatus('🎧 Mode simulation prêt');
            
            // Test de disponibilité audio en arrière-plan (optionnel)
            audioElement.addEventListener('loadstart', function() {
                console.log('Test audio en arrière-plan...');
            });
            
            // Initialisation simple et robuste
            audioElement = document.getElementById('backgroundMusic');
            audioElement.volume = volume / 100;
            
            updateAudioStatus('🎧 Mode simulation optimal');
            
            // Test silencieux en arrière-plan pour détecter l'audio réel éventuel
            setTimeout(() => {
                try {
                    testRealAudioQuietly();
                } catch(e) {
                    console.log('Test audio en arrière-plan échoué - normal');
                }
            }, 2000);
            
            showSimulationInfo();
            updateSystemAudioStatus();
            
            // Nettoyer les timers au déchargement de la page
            window.addEventListener('beforeunload', function() {
                stopMusicSimulation();
            });
            
            // Initialiser le thème des jeux
            initGameThemes();
            
            showMessage('🚀 Galaxy i26 prêt ! Mode simulation musical optimal dans Claude.ai');
        }

        // Démarrer l'application avec protection d'erreur
        try {
            init();
        } catch(error) {
            console.log('Erreur initialisation:', error);
            // Initialisation minimale de secours
            if (typeof updateTime === 'function') {
                updateTime();
                setInterval(updateTime, 1000);
            }
            if (typeof showMessage === 'function') {
                showMessage('🚀 Galaxy i26 - Mode sécurisé');
            }
        }
    </script>


</body></html>
